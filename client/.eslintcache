[{"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\index.js":"1","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\App.js":"2","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\store.js":"3","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\routes.js":"4","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\dialogs-reducer.js":"5","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\profile-reducer.js":"6","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\users-reducer.js":"7","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\auth-reducer.js":"8","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\sidebar-reducer.js":"9","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\hooks\\http.hook.js":"10","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\hooks\\message.hook.js":"11","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\components\\Spinner\\spinner.js":"12","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\components\\Slider\\Slider.js":"13","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\components\\Header\\Header.js":"14","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\AuthPage\\AuthPage.js":"15","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\HomePage\\HomePage.js":"16","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\UsersPage\\UsersContainer.jsx":"17","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\Dialogs\\DialogItem.js":"18","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\DialogsPage.js":"19","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\Dialogs\\Dialogs.js":"20","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\Messages\\MessagesContainer.js":"21","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\Messages\\Messages.js":"22","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\Messages\\MessageItem.js":"23","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\ProfilePage\\Profile.js":"24","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\HomePage\\PostItem.js":"25","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\components\\Spinner\\Spinner.js":"26","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\ProfilePage\\UserProfile.js":"27","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\UsersPage\\Users.js":"28"},{"size":570,"mtime":1616607922891,"results":"29","hashOfConfig":"30"},{"size":2000,"mtime":1617134324944,"results":"31","hashOfConfig":"30"},{"size":545,"mtime":1612608029027,"results":"32","hashOfConfig":"30"},{"size":806,"mtime":1617221341763,"results":"33","hashOfConfig":"30"},{"size":1376,"mtime":1616596690038,"results":"34","hashOfConfig":"30"},{"size":1476,"mtime":1613593751947,"results":"35","hashOfConfig":"30"},{"size":2642,"mtime":1612364996654,"results":"36","hashOfConfig":"30"},{"size":903,"mtime":1613761712963,"results":"37","hashOfConfig":"30"},{"size":140,"mtime":1611164788974,"results":"38","hashOfConfig":"30"},{"size":1127,"mtime":1617307162275,"results":"39","hashOfConfig":"30"},{"size":209,"mtime":1613319539274,"results":"40","hashOfConfig":"30"},{"size":272,"mtime":1616932481970,"results":"41","hashOfConfig":"42"},{"size":4811,"mtime":1617028685415,"results":"43","hashOfConfig":"30"},{"size":2666,"mtime":1617306270424,"results":"44","hashOfConfig":"30"},{"size":6267,"mtime":1616939129868,"results":"45","hashOfConfig":"30"},{"size":1269,"mtime":1617286008363,"results":"46","hashOfConfig":"30"},{"size":2494,"mtime":1617122023515,"results":"47","hashOfConfig":"42"},{"size":3889,"mtime":1617306714240,"results":"48","hashOfConfig":"30"},{"size":645,"mtime":1616706135779,"results":"49","hashOfConfig":"30"},{"size":3771,"mtime":1617276543807,"results":"50","hashOfConfig":"30"},{"size":914,"mtime":1616706156638,"results":"51","hashOfConfig":"30"},{"size":3919,"mtime":1617277464858,"results":"52","hashOfConfig":"30"},{"size":588,"mtime":1617213709444,"results":"53","hashOfConfig":"30"},{"size":6235,"mtime":1617280924862,"results":"54","hashOfConfig":"30"},{"size":4802,"mtime":1617306662242,"results":"55","hashOfConfig":"30"},{"size":276,"mtime":1616939396940,"results":"56","hashOfConfig":"30"},{"size":4168,"mtime":1617285307404,"results":"57","hashOfConfig":"30"},{"size":1104,"mtime":1617125709557,"results":"58","hashOfConfig":"30"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},"1rnyk1d",{"filePath":"62","messages":"63","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"61"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"yptu8l",{"filePath":"85","messages":"86","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"87","usedDeprecatedRules":"61"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90","usedDeprecatedRules":"61"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"61"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"96","usedDeprecatedRules":"61"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"99","messages":"100","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"101","usedDeprecatedRules":"61"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"106","usedDeprecatedRules":"61"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"111","usedDeprecatedRules":"61"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"114","messages":"115","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116","usedDeprecatedRules":"61"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"119","usedDeprecatedRules":"61"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"122","messages":"123","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"124","usedDeprecatedRules":"61"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\index.js",[],["127","128"],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\App.js",["129","130","131","132"],"import React, { createRef, forwardRef, useEffect, useRef } from 'react';\r\nimport './App.scss';\r\nimport {BrowserRouter as Router, HashRouter, Route} from \"react-router-dom\";\r\nimport Header from \"./components/Header/Header\";\r\nimport { connect } from 'react-redux';\r\nimport { useRoutes } from './routes';\r\n// import Spinner from './components/Spinner/spinner';\r\nimport { loginAC } from './redux/auth-reducer';\r\nimport AuthPage from './pages/AuthPage/AuthPage';\r\n\r\nconst App = (props) => {\r\n    const data = JSON.parse(sessionStorage.getItem('storageName'));\r\n    const appWrapper = useRef(null);\r\n\r\n    const isAuthenticated = !!props.token;\r\n    const routes = useRoutes();\r\n\r\n    if (data && data.token) {\r\n        props.login(data.token, data.user);\r\n    }\r\n\r\n    useEffect(() => {\r\n        fixOffset()\r\n        \r\n        window.addEventListener('resize', fixOffset);\r\n\r\n        return () => window.removeEventListener('resize', fixOffset);\r\n    }, [isAuthenticated]);\r\n\r\n    function fixOffset() {\r\n        try{\r\n            appWrapper.current.style.height = document.body.clientHeight - (isAuthenticated ? 40 : 0) + 'px';\r\n        } catch {}    \r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            {!isAuthenticated ? \r\n                <Route path=\"/\" exact component={AuthPage} />\r\n                :\r\n                <>\r\n                    <div className='white-line'></div>\r\n                    <div className='app'>\r\n                        <Header />\r\n                        <div ref={appWrapper} className='app-wrapper'> \r\n                            {routes}\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            }\r\n        </Router>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n    token: state.auth.token\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        login: (token, user) => {\r\n            dispatch(loginAC(token, user));\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\store.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\routes.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\dialogs-reducer.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\profile-reducer.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\users-reducer.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\auth-reducer.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\redux\\sidebar-reducer.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\hooks\\http.hook.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\hooks\\message.hook.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\components\\Spinner\\spinner.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\components\\Slider\\Slider.js",["133","134"],"import React, { createRef, useEffect, useRef } from 'react';\r\nimport './Slider.scss';\r\n\r\nconst Slider = ({imgWidth, imgHeight}) => {\r\n    const slidesUrls = [\r\n            {url: 'https://www.sunchemical.com/wp-content/uploads/2019/07/SunWave_banner-1200x400.jpg'},\r\n            {url: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTPuUErrrIAbhJWNbw-taT2n5SqTHHPAdjPS6Nd8eGJhsYOmZ1sEHICT8QkN5EbEL0XWVo&usqp=CAU'},\r\n            {url: 'https://www.mapix.com/wp-content/uploads/2018/04/1200x400.png'},\r\n            {url: 'https://sinctech.com/wp-content/uploads/2017/07/placeholder-1200x400.png'}\r\n        ], //slider_item\r\n        slidesWrapper = useRef(null), \r\n        slidesField = useRef(null), \r\n        slider = useRef(null), \r\n        dotWrapper = useRef(null), \r\n        slides = useRef(slidesUrls.map(() => createRef())),\r\n        dots = useRef(slidesUrls.map(() => createRef()));\r\n\r\n    let slideIndex = 1, offset = 0, toSlide = 1,\r\n        width = '';\r\n\r\n    useEffect(() => {\r\n        width = replaceWords(window.getComputedStyle(slidesWrapper.current).width);\r\n        fixSlideSize();\r\n        fixOffset();\r\n        \r\n        window.addEventListener('resize', fixOffset);\r\n\r\n        colorCurDot();\r\n        \r\n        slidesField.current.style.width = 100 * slidesUrls.length + '%';\r\n\r\n        return () => window.removeEventListener('resize', fixOffset);\r\n    }, []);\r\n\r\n    const nextBtnClicked = () => {\r\n        toRight();\r\n        if (slideIndex < slidesUrls.length) {\r\n            slideIndex++;\r\n        } else {\r\n            slideIndex = 1;\r\n        }\r\n        colorCurDot();\r\n    };\r\n\r\n    const prevBtnClicked = () => {\r\n        toLeft();\r\n        if (slideIndex > 1) {\r\n            slideIndex--;\r\n        } else {\r\n            slideIndex = slidesUrls.length;\r\n        }\r\n        colorCurDot();\r\n    };\r\n\r\n    function toRight() {\r\n        if (offset == width * (slidesUrls.length - 1)) {\r\n            offset = 0;\r\n        } else {\r\n            offset += width * toSlide;\r\n        }\r\n        slidesField.current.style.transform = `translateX(-${offset}px)`;\r\n    }\r\n\r\n    function toLeft() {\r\n        if (offset === 0) {\r\n            offset = width * (slidesUrls.length - 1) * toSlide;\r\n        } else {\r\n            offset -= width * toSlide;\r\n        }\r\n        slidesField.current.style.transform = `translateX(-${offset}px)`;\r\n    }\r\n\r\n    function goToSlideByDot(dotIndex) {\r\n        toSlide = Math.abs(dotIndex - slideIndex);\r\n        if (dotIndex < slideIndex) {\r\n            slideIndex = dotIndex;\r\n            toLeft();\r\n        } else if (dotIndex > slideIndex) {\r\n            slideIndex = dotIndex;\r\n            toRight();\r\n        }\r\n        toSlide = 1;\r\n        colorCurDot();\r\n    }\r\n\r\n    function colorCurDot() {\r\n        dots.current.forEach(({current}) => {\r\n            current.style.background = \"none\";\r\n        });\r\n        dots.current[slideIndex - 1].current.style.background = \"#fdc84b\";\r\n    }\r\n\r\n    function fixSlideSize() {\r\n        slides.current.forEach(({current}) => {\r\n            current.style.width = `${width}px`;\r\n        });\r\n    }\r\n\r\n    function fixSliderHeight() {\r\n        slider.current.style.height = `${width/(imgWidth/imgHeight)}px`;\r\n    }\r\n\r\n    function fixOffset() {\r\n        let temp = width;\r\n        width = replaceWords(window.getComputedStyle(slidesWrapper.current).width);\r\n        fixSlideSize();\r\n        fixSliderHeight();\r\n        if (width > temp) {\r\n            offset += (slideIndex - 1) * Math.abs(width - temp);\r\n        } else if (width < temp) {\r\n            offset -= (slideIndex - 1) * Math.abs(width - temp);\r\n        }\r\n        slidesField.current.style.transform = `translateX(-${offset}px)`;\r\n    }\r\n\r\n    function replaceWords(element) {\r\n        let lastNumIndexInWidth = element.length - element.split('').reverse().join('').search(/\\d/);\r\n        return Math.round(+element.split('').splice(0, lastNumIndexInWidth).join(''));\r\n    }\r\n\r\n    return (\r\n        <div className=\"slider\" ref={slider}>\r\n            <div className=\"container\" ref={slidesWrapper}>\r\n                <div className=\"track\" ref={slidesField}>\r\n                    {\r\n                        slidesUrls.map(({url}, i) => <div key={i} ref={slides.current[i]} className=\"item\"><img src={url} alt=\"\"/></div>)\r\n                    }\r\n                </div>\r\n            </div>\r\n            <div className=\"btn_prev\" onClick={prevBtnClicked}></div>\r\n            <div className=\"btn_next\" onClick={nextBtnClicked}></div>\r\n            <div className=\"dot-wrapper\" ref={dotWrapper}>\r\n                {\r\n                    slidesUrls.map((_, i) => <div className='slider-dot' ref={dots.current[i]} key={i} onClick={() => goToSlideByDot(i+1)}></div>)\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Slider;","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\components\\Header\\Header.js",["135","136","137","138"],"import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {Link, useHistory} from 'react-router-dom';\r\nimport { useHttp } from '../../hooks/http.hook';\r\nimport { logoutAC } from '../../redux/auth-reducer';\r\nimport userPhoto from '../../assets/images/user.png';\r\nimport './Header.scss';\r\n\r\nconst Header = (props) => {\r\n    const {logout} = props;\r\n    const history = useHistory();\r\n    const {error, request, clearError} = useHttp();\r\n    const [searchUsers, setSearchUsers] = useState('');\r\n    const [foundUsers, setFoundUsers] = useState([]);\r\n\r\n    const logoutHandler = (e) => {\r\n        e.preventDefault();\r\n        logout(); \r\n        history.push('/');\r\n    };\r\n    \r\n    useEffect(async () => {\r\n        if (searchUsers) {\r\n            try{\r\n                const users = await request('/api/users/post/users-search', 'POST', {query: searchUsers}, {Authorization: `Bearer ${props.token}`});\r\n                setFoundUsers(users);\r\n            } catch (err) {console.log(err)}\r\n        } else {\r\n            setFoundUsers([]);\r\n        }\r\n    }, [searchUsers]);\r\n\r\n    return (\r\n        <header className='header'>\r\n            <span className=\"label\"><Link to=\"/\"><big>Kalina</big></Link></span>\r\n            <div className=\"search-user\">\r\n                <i className=\"material-icons\" style={{position: 'absolute', top: '50%', transform: 'translateY(-50%)'}}>search</i>\r\n                <input type=\"text\" placeholder=\"Search..\" id=\"search-input\" value={searchUsers} onChange={(e) => setSearchUsers(e.target.value)}/>\r\n                {\r\n                    foundUsers.length !== 0 &&\r\n                    <div className=\"dropdown-content\">\r\n                        {foundUsers.map(user => <Link to={'/profile/' + user._id}  key={user._id} onClick={() => setSearchUsers('')}><div><img style={{width: '30px'}} src={user.profileImg || userPhoto} alt='' />{user.displayName}</div></Link>)}\r\n                    </div> \r\n                }\r\n            </div>\r\n            <div className=\"navigation\">\r\n                <Link to=\"/\">Home</Link>\r\n                <Link to=\"/profile\">Profile</Link>\r\n                <Link to=\"/dialogs\">Dialogs</Link>\r\n                <Link to=\"/users\">Users</Link>\r\n                <Link to=\"/\" onClick={logoutHandler}>Log out</Link>\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        token: state.auth.token\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        logout: () => {\r\n            dispatch(logoutAC());\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Header);","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\AuthPage\\AuthPage.js",["139","140","141","142"],"import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { useHttp } from '../../hooks/http.hook';\r\nimport { useMessage } from '../../hooks/message.hook';\r\nimport { loginAC } from '../../redux/auth-reducer';\r\nimport Spinner from '../../components/Spinner/Spinner';\r\nimport './AuthPage.scss';\r\n\r\nconst AuthPage = (props) => {\r\n    const {login} = props;\r\n    const message = useMessage();\r\n    const {error, request, clearError} = useHttp();\r\n    const [loading, setLoading] = useState(false);\r\n    const [form, setForm] = useState({\r\n        email: '',\r\n        displayName: '',\r\n        password: ''\r\n    });\r\n    const [isRegistrateForm, setIsRegistrateForm] = useState(true);\r\n    \r\n    useEffect(() => {\r\n        message(error);\r\n        clearError();\r\n    },[error, message, clearError]);\r\n\r\n    useEffect(() => {\r\n        const data = JSON.parse(sessionStorage.getItem('storageName'));\r\n        \r\n        if (data && data.token) {\r\n            login(data.token, data.user);\r\n        }\r\n    }, [login])\r\n\r\n    const changeHandler = e => {\r\n        setForm({...form, [e.target.name]: e.target.value});\r\n    }\r\n\r\n    const registerHandler = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const register = await request('/api/auth/register', 'POST', {...form}, {Authorization: `Bearer ${props.token}`});\r\n            message(register.message);\r\n            setLoading(false);\r\n            changeFormHandler();\r\n        } catch (err) {\r\n            alert(err.message);\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    const loginHandler = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const data = await request('/api/auth/login', 'POST', {...form}, {Authorization: `Bearer ${props.token}`});\r\n            \r\n            login(data.token, data.user);\r\n        } catch (err) {\r\n            alert(err.message);\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    const changeFormHandler = () => {\r\n        setIsRegistrateForm(!isRegistrateForm);\r\n    }\r\n    \r\n    return (\r\n        <>\r\n            {loading ?\r\n                <Spinner />\r\n                :\r\n                <div className='split-screen'>\r\n                    <div className='left'>\r\n                        <section className='copy'>\r\n                            <h1>Kalina</h1>\r\n                            <p>For the beauty text.</p>\r\n                        </section>\r\n                    </div>\r\n                    <div className='right'>\r\n                        <form>\r\n                            <section className='copy'>\r\n                                <h2>Sign {isRegistrateForm ? 'up' : 'in'}</h2>\r\n                                <div className='login-container'>\r\n                                    {isRegistrateForm ?\r\n                                        <p>Already have an account? <a onClick={changeFormHandler}><strong>Sign in!</strong></a></p>\r\n                                        :\r\n                                        <p>Don't have an account? <a onClick={changeFormHandler}><strong>Sign up!</strong></a></p>\r\n                                    }\r\n                                </div>\r\n                            </section>\r\n                            {isRegistrateForm && <div className='input-container name'>\r\n                                <label htmlFor='displayName'>Nickname</label>\r\n                                <input \r\n                                    name=\"displayName\"\r\n                                    id=\"displayName\" \r\n                                    type=\"text\"\r\n                                    value={form.displayName}\r\n                                    onChange={changeHandler}\r\n                                    required/>\r\n                            </div>}\r\n                            <div className='input-container email'>\r\n                                <label htmlFor='email'>Email</label>\r\n                                <input \r\n                                    name=\"email\"\r\n                                    id=\"email\" \r\n                                    type=\"email\" \r\n                                    value={form.email}\r\n                                    onChange={changeHandler}\r\n                                    required/>\r\n                            </div>\r\n                            <div className='input-container password'>\r\n                                <label htmlFor='password'>Password</label>\r\n                                <input \r\n                                    name=\"password\"\r\n                                    id=\"password\" \r\n                                    type=\"password\" \r\n                                    value={form.password}\r\n                                    onChange={changeHandler}\r\n                                    placeholder='At least 6 characters!' \r\n                                    required/>\r\n                                <i className='far fa-eye-slash' />\r\n                            </div>\r\n                            {isRegistrateForm ?\r\n                                <button className='signup-btn' type='submit' onClick={registerHandler}>Sign up</button>\r\n                                :\r\n                                <button className='signup-btn' type='submit' onClick={loginHandler}>Sign in</button>\r\n                            }\r\n                            <section className='copy legal'>\r\n                                <p>\r\n                                    <span className='small'>\r\n                                        By continuing, you agree to accept our <br/><a>Privacy Policy</a> & <a>Terms of Service</a>.\r\n                                    </span>\r\n                                </p>\r\n                            </section>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        token: state.auth.token\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        login: (token, user) => {\r\n            dispatch(loginAC(token, user));\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AuthPage);","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\HomePage\\HomePage.js",["143","144","145","146","147"],"import React, { useEffect, useState } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Slider from '../../components/Slider/Slider';\r\nimport { useHttp } from '../../hooks/http.hook';\r\nimport './HomePage.scss';\r\nimport PostItem from './PostItem';\r\nimport Spinner from '../../components/Spinner/Spinner';\r\n\r\nconst HomePage = (props) => {\r\n    const [allPosts, setAllPosts] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const {error, request, clearError} = useHttp();\r\n\r\n    useEffect(async () => {\r\n        const data = await request('/api/posts/get/posts', 'GET', null, {\r\n            Authorization: `Bearer ${props.token}`,\r\n        });\r\n        setAllPosts(data.posts)\r\n        setLoading(false)\r\n    }, []);\r\n\r\n    return (\r\n        <div className='home-page'>\r\n            {loading && <Spinner/>}\r\n            {/* <div className='element'>\r\n                <Slider imgWidth={1200} imgHeight={500}/>\r\n            </div> */}\r\n            <div className='home-page__inner'>\r\n                {allPosts.map(post => <PostItem post={post} key={post._id}/>)}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    token: state.auth.token\r\n});\r\n\r\nexport default connect(mapStateToProps)(HomePage);","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\UsersPage\\UsersContainer.jsx",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\Dialogs\\DialogItem.js",["148","149","150","151","152","153","154"],"import React, { useEffect, useState } from 'react';\r\nimport './DialogItem.scss';\r\nimport {Link} from \"react-router-dom\";\r\nimport { Avatar } from '@material-ui/core';\r\nimport Pusher from 'pusher-js';\r\nimport { setChatAC, setDialogsAC, setIsDialogSelectedAC, setMessagesAC } from \"../../../redux/dialogs-reducer\";\r\nimport { connect } from 'react-redux';\r\nimport { useHttp } from '../../../hooks/http.hook';\r\nimport userPhoto from \"../../../assets/images/user.png\";\r\n\r\nconst pusher = new Pusher('b634efb073fba40fbf3a', {\r\n    cluster: 'eu'\r\n});\r\n\r\nconst DialogItem = (props) => {\r\n    // const path = \"/dialogs/\" + props.id;\r\n    const {loading, error, request, clearError} = useHttp();\r\n    const [dialogsLastMsg, setDialogsLastMsg] = useState({});\r\n    const [extra, setExtra] = useState({});\r\n    let displayName = '', message = '', timestamp = 0;\r\n\r\n    useEffect(() => {\r\n        props.extra.forEach(el => {\r\n            if (el.id !== props.user._id) {\r\n                setExtra(el);\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    const getLastMessage = async () => {\r\n        try {\r\n            const data = await request(`/api/chats/get/lastMessage?id=${props.id}`, 'GET', null, {Authorization: `Bearer ${props.token}`});\r\n            setDialogsLastMsg(data);\r\n        } catch {console.log(1)}\r\n    }\r\n\r\n    useEffect(() => {\r\n        getLastMessage();\r\n        \r\n        const channel = pusher.subscribe('messages');\r\n        channel.bind('newMessage', () => {\r\n            getLastMessage();   \r\n        });\r\n\r\n        return () => {\r\n            channel.unbind_all();\r\n            channel.unsubscribe();\r\n        };\r\n    }, [props.id]);\r\n\r\n    const selectedDialog = async () => {\r\n        try {\r\n            const data = await request(`/api/chats/get/conversation?id=${props.id}`, 'GET', null, {Authorization: `Bearer ${props.token}`});\r\n            props.setMessages(data.conversation);\r\n            props.setChat({\r\n                chatName: extra.displayName || data.chatName,\r\n                chatImg: extra.profileImg || data.chatImg,\r\n                chatId: props.id\r\n            });\r\n            props.setIsDialogSelected(true);\r\n        } catch {console.log(1)}\r\n    }\r\n\r\n    try {\r\n        displayName = dialogsLastMsg.owner.displayName;\r\n        message = dialogsLastMsg.message;\r\n        timestamp = dialogsLastMsg.timestamp;\r\n    } catch {}\r\n\r\n    return (\r\n        // <Link to={'/dialogs/' + props.id}>\r\n            <div onClick={selectedDialog} className='dialogItem'>\r\n                <div className='dialogItem__info'>\r\n                    <div className='dialogItem__info-avatar'><Avatar src={extra.profileImg || userPhoto}/></div>\r\n                    <div className='dialogItem__info-main'>\r\n                        <div><h1>{extra.displayName || props.name}</h1></div>\r\n                        <span className='dialogItem__info-message'>{displayName}: {message}</span>\r\n                    </div>\r\n                    <div className=\"timaStamp\"><small>24.03</small></div>\r\n                </div>\r\n            </div>\r\n        // </Link>  \r\n    )\r\n}\r\n\r\n\r\n// {/* <div><small>{new Date(parseInt(timestamp)).toISOString().replace(/T/g, ' ').replace(/\\..*/, '')}</small> </div> */}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        dialogs: state.dialogsPage.dialogs,\r\n        token: state.auth.token,\r\n        user: state.auth.user\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setDialogs: (dialogs) => {\r\n            dispatch(setDialogsAC(dialogs));\r\n        },\r\n        setMessages: (messages) => {\r\n            dispatch(setMessagesAC(messages));\r\n        },\r\n        setChat: chat => {\r\n            dispatch(setChatAC(chat))\r\n        },\r\n        setIsDialogSelected: (a) => {\r\n            dispatch(setIsDialogSelectedAC(a))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DialogItem);","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\DialogsPage.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\Dialogs\\Dialogs.js",["155","156","157","158","159","160","161"],"import React, { useEffect, useRef } from 'react';\r\n// import ChatIcon from '@material-ui/icons/Chat';\r\n// import DonutLargeIcon from '@material-ui/icons/DonutLarge';\r\n// import MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport \"./Dialogs.scss\";\r\n// import { IconButton, Avatar } from '@material-ui/core';\r\nimport { SearchOutlined } from '@material-ui/icons';\r\nimport DialogItem from './DialogItem';\r\nimport { Button } from '@material-ui/core';\r\nimport Pusher from 'pusher-js';\r\nimport { useHttp } from '../../../hooks/http.hook';\r\nimport { setDialogsAC } from '../../../redux/dialogs-reducer';\r\nimport { connect } from 'react-redux';\r\nimport { useState } from 'react';\r\n\r\nconst pusher = new Pusher('b634efb073fba40fbf3a', {\r\n    cluster: 'eu'\r\n});\r\n\r\nconst DialogsList = (props) => {    \r\n    const {error, request, clearError} = useHttp();\r\n    const [loading, setLoading] = useState(false);\r\n    const dialogs = useRef(null);\r\n    const dialogsHeader = useRef(null);\r\n    const dialogsItems = useRef(null);\r\n\r\n    const getDialogs = async () => {\r\n        try {\r\n            const data = await request('/api/chats/get/conversations', 'GET', null, {\r\n                Authorization: `Bearer ${props.token}`,\r\n            });\r\n            props.setDialogs(data);\r\n        } catch(err) {console.log(err)}\r\n    }\r\n\r\n    \r\n    useEffect(() => {\r\n        !props.isDialogSelected ? dialogs.current.classList.add('show') : dialogs.current.classList.remove('show');\r\n    }, [props.isDialogSelected])\r\n    \r\n    useEffect(() => {\r\n        getDialogs();\r\n        \r\n        const channel = pusher.subscribe('chats');\r\n        channel.bind('newChat', () => {\r\n            getDialogs();\r\n        });\r\n    }, []);\r\n\r\n    const addNewChat = async (e) => {\r\n        e.preventDefault();\r\n        const chatName = prompt('Enter a chat name');\r\n        const firstMsg = prompt('Send a welcome message');\r\n\r\n        if(chatName && firstMsg) {\r\n            try {\r\n                let chatId = '';\r\n\r\n                const data = await request('/api/chats/new/conversation', 'POST', {chatName}, {Authorization: `Bearer ${props.token}`});\r\n\r\n                chatId = data._id\r\n\r\n                await request(`/api/chats/new/message?id=${chatId}`, 'POST', {\r\n                    message: firstMsg,\r\n                    timestamp: Date.now()\r\n                }, {Authorization: `Bearer ${props.token}`});\r\n            } catch(err) {console.log(err)}\r\n        }\r\n    }\r\n    \r\n    return (\r\n        <div ref={dialogs} className='dialogs'>\r\n            <div ref={dialogsHeader} className='dialogs__header'>\r\n                <input placeholder='Search or start new chat' type='text' />\r\n                <button onClick={addNewChat}>+</button>\r\n            </div>\r\n            {/* <div className='dialogs__search'>\r\n                <div className='dialogs__searchContainer'>\r\n                    <SearchOutlined/>\r\n                    <input placeholder='Search or start new chat' type='text' />\r\n                </div>\r\n            </div> */}\r\n            <div ref={dialogsItems} className='dialogs__items'>\r\n                {props.dialogs.map(dialog => <DialogItem name={dialog.name} key={dialog.id} id={dialog.id} timestamp={dialog.timestamp} extra={dialog.extra}/> )} \r\n            </div>\r\n        </div>\r\n    )  \r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        dialogs: state.dialogsPage.dialogs,\r\n        isDialogSelected: state.dialogsPage.isDialogSelected,\r\n        user: state.auth.user,\r\n        token: state.auth.token\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setDialogs: (dialogs) => {\r\n            dispatch(setDialogsAC(dialogs));\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DialogsList);","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\Messages\\MessagesContainer.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\Messages\\Messages.js",["162","163","164","165","166"],"import { Avatar, IconButton } from '@material-ui/core';\r\nimport { AttachFile, InsertEmoticon, MoreVert, SearchOutlined } from '@material-ui/icons';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport React, { useEffect, useState } from 'react';\r\nimport './Messages.scss';\r\nimport Pusher from 'pusher-js';\r\nimport MessageItem from './MessageItem';\r\nimport { useHttp } from '../../../hooks/http.hook';\r\nimport btnBack from '../../../assets/images/arrowback.svg';\r\n\r\nconst MessagesList = (props) => {\r\n    const {loading, error, request, clearError} = useHttp();\r\n    const [newMessage, setNewMessage] = useState('');\r\n    \r\n    const onSendMessageClick = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            await request(`/api/chats/new/message?id=${props.chat.chatId}`, 'POST', {\r\n                message: newMessage,\r\n                timestamp: Date.now()\r\n            }, {Authorization: `Bearer ${props.token}`});\r\n        } catch {console.log(1)}\r\n        setNewMessage('');\r\n    }\r\n\r\n    const fixScroll = () => {\r\n        try {\r\n            const block = document.querySelector('.messages__body');\r\n            block.scrollTop = block.scrollHeight;\r\n        } catch{}\r\n    }\r\n\r\n    const onNewMessageChange = (e) => {\r\n        let body = e.target.value;\r\n        setNewMessage(body);\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('resize', () => fixScroll());\r\n\r\n        return () => window.removeEventListener('resize', () => fixScroll());\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const pusher = new Pusher('b634efb073fba40fbf3a', {\r\n            cluster: 'eu'\r\n        });\r\n      \r\n        const channel = pusher.subscribe('messages');\r\n        channel.bind('newMessage', async () => {\r\n            try {\r\n                const data = await request(`/api/chats/get/conversation?id=${props.chat.chatId}`, 'GET', null, {Authorization: `Bearer ${props.token}`});\r\n                props.setMessages(data.conversation);\r\n                fixScroll();\r\n            } catch {}\r\n        });\r\n\r\n        fixScroll();\r\n\r\n        return () => {\r\n            channel.unbind_all();\r\n            channel.unsubscribe();\r\n        };\r\n    }, [props.chat.chatId]);\r\n\r\n    const toggleChat = () => {props.setIsDialogSelected(false)}\r\n\r\n    return (\r\n        <div className='messages'>\r\n            <div className='messages__header'>\r\n                <i onClick={toggleChat} className={\"material-icons btnBack\"} style={{fontSize: '40px'}}>arrow_back</i>\r\n                <Avatar src={props.chat.chatImg}/>\r\n                <div className='messages__headerInfo'>\r\n                    <h3>{props.chat.chatName}</h3>\r\n                </div>\r\n                <div className='messages__headerRight'>\r\n                    <IconButton>\r\n                        <SearchOutlined/>\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <AttachFile/>\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <MoreVert/>\r\n                    </IconButton>\r\n                </div>\r\n            </div>\r\n            <div className='messages__body'>\r\n                { props.messages.map( message => <MessageItem userName={props.user.displayName} message={message} key={message._id} /> ) }\r\n            </div>\r\n            <div className='messages__footer'>\r\n                <InsertEmoticon className='emoji'/>\r\n                <form>\r\n                    <input \r\n                        type='text'\r\n                        value={newMessage}\r\n                        onChange={onNewMessageChange}\r\n                        placeholder='Enter your message'/>\r\n                    <button \r\n                        type='submit'\r\n                        onClick={onSendMessageClick}>Send</button>\r\n                </form>\r\n                <MicIcon />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MessagesList;","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\DialogsPage\\Messages\\MessageItem.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\ProfilePage\\Profile.js",["167","168","169","170","171","172","173","174"],"import { connect } from 'react-redux';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useHttp } from '../../hooks/http.hook';\r\n// import ProfileInfo from \"./ProfileInfo/ProfileInfo\";\r\n// import MyPostsContainer from \"./MyPosts/MyPostsContainer\";\r\nimport './Profile.scss';\r\nimport Spinner from '../../components/Spinner/Spinner';\r\nimport userPhoto from '../../assets/images/user.png';\r\nimport { Avatar } from '@material-ui/core';\r\n\r\nconst Profile = (props) => {\r\n    const {error, request, clearError} = useHttp();\r\n    const [isCreatePostOpen, setIsCreatePostOpen] = useState(false);\r\n    const [isChangingProfileImage, setIsChangingProfileImage] = useState(false);\r\n    const [title, setTitle] = useState('');\r\n    const [body, setBody] = useState('');\r\n    const [newPostImage, setNewPostImage] = useState('');\r\n    const [newProfileImage, setNewProfileImage] = useState('');\r\n    const [myPosts, setMyPosts] = useState(null);\r\n    const [followData, setFollowData] = useState(null);\r\n\r\n    useEffect(async () => {\r\n        try{\r\n            const data = await request('/api/posts/get/myposts', 'GET', null, {\r\n                Authorization: `Bearer ${props.token}`,\r\n            });\r\n            const newfollowData = await request('/api/users/get/myfollowdata', 'GET', null, {\r\n                Authorization: `Bearer ${props.token}`\r\n            });\r\n            \r\n            setFollowData(newfollowData);\r\n            setMyPosts(data.posts)\r\n        } catch(err) {console.log(err)}\r\n    }, []);\r\n\r\n    const setPostData = async () => {\r\n        const formData = new FormData();\r\n        formData.append('file', newPostImage);\r\n        formData.append('upload_preset', 'kalina-why-not');\r\n        formData.append('cloud_name', 'kalina-why-not');\r\n        await fetch('https://api.cloudinary.com/v1_1/kalina-why-not/image/upload', {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        .then(res => res.json())\r\n        .then(async formData => {\r\n            await request('/api/posts/new/post', 'POST', {title, body, picture: formData.url}, {\r\n                Authorization: `Bearer ${props.token}`,\r\n            });\r\n            setIsCreatePostOpen(false)\r\n        })\r\n        .catch(err => console.log(err));\r\n    };\r\n\r\n    const changeProfileImage = async () => {\r\n        const formData = new FormData();\r\n        formData.append('file', newProfileImage);\r\n        formData.append('upload_preset', 'kalina-why-not');\r\n        formData.append('cloud_name', 'kalina-why-not');\r\n        await fetch('https://api.cloudinary.com/v1_1/kalina-why-not/image/upload', {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        .then(res => res.json())\r\n        .then(async formData => {\r\n            const data = await request('/api/users/put/profileImg', 'PUT', {picture: formData.url}, {\r\n                Authorization: `Bearer ${props.token}`,\r\n            });\r\n            sessionStorage.setItem('storageName', JSON.stringify({\r\n                token: props.token, user: data\r\n            }));\r\n            setIsChangingProfileImage(false);\r\n        })\r\n        .catch(err => console.log(err));\r\n    };\r\n\r\n    const deletePost = async () => {\r\n        const data = await request('/api/posts/delete/post/id', 'DELETE', null, {\r\n            Authorization: `Bearer ${props.token}`,\r\n        });\r\n    }\r\n\r\n    return (\r\n        <>\r\n        {\r\n            !myPosts ? \r\n            <Spinner />\r\n            :\r\n            <div className='profile-page'>\r\n                <div className='profile__info'>\r\n                    <div>\r\n                        <Avatar style={{width: '93px', height: '93px'}} onClick={() => setIsChangingProfileImage(true)} src={props.user.profileImg || userPhoto}/>\r\n                    </div> \r\n                    {isChangingProfileImage && <>\r\n                    <div className='newPostWindow'>\r\n                        <div className='newPostBody'>\r\n                            <span>Upload image</span>\r\n                            <input type='file' onChange={e => setNewProfileImage(e.target.files[0])}/>\r\n                            <button onClick={changeProfileImage}>Submit</button>\r\n                        </div>\r\n                    </div>\r\n                </>}\r\n                    <div>\r\n                        <h4>{props.user.displayName}</h4>\r\n                        <div className='profile__info-attributes'>\r\n                            <h5>{myPosts.length} posts</h5>\r\n                            <h5>{followData.followers.length} followers</h5>\r\n                            <h5>{followData.following.length} following</h5>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <button onClick={() => setIsCreatePostOpen(true)}>Add new post</button>\r\n                {isCreatePostOpen && <>\r\n                    <div className='newPostWindow'>\r\n                        <div className='newPostBody'>\r\n                            <span>Description</span>\r\n                            <input type='text' placeholder='Enter Description' value={body} onChange={e => setBody(e.target.value)}/>\r\n                            <span>Upload image</span>\r\n                            <input type='file' onChange={e => setNewPostImage(e.target.files[0])}/>\r\n                            <button onClick={setPostData}>Submit</button>\r\n                        </div>\r\n                    </div>\r\n                </>}\r\n                <div className='profile__gallery'>\r\n                {/* <i onClick={deletePost} className={\"material-icons\"} style={{fontSize: '30px', cursor: 'pointer', float: 'right'}}>delete</i> */}\r\n                    {myPosts.map(post => <img key={post._id} src={post.picture} alt=\"\"/>)}\r\n                </div>\r\n            </div>\r\n        }\r\n        </>\r\n    )\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        token: state.auth.token,\r\n        user: state.auth.user\r\n    }\r\n}\r\n\r\n// let mapDispatchToProps = (dispatch) => {\r\n//     return {\r\n//         setDialogs: (dialogs) => {\r\n//             dispatch(setDialogsAC(dialogs));\r\n//         }\r\n//     }\r\n// }\r\n\r\nexport default connect(mapStateToProps)(Profile);","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\HomePage\\PostItem.js",["175","176","177","178","179"],"import { connect } from 'react-redux';\r\nimport React, { useEffect, useRef } from 'react';\r\nimport { useState } from 'react';\r\nimport { useHttp } from '../../hooks/http.hook';\r\nimport { Link } from 'react-router-dom';\r\nimport userPhoto from '../../assets/images/user.png';\r\nimport { Avatar } from '@material-ui/core';\r\nimport Picker from 'emoji-picker-react';\r\n\r\nconst PostItem = ({post, token, user}) => {\r\n    const {loading, error, request, clearError} = useHttp();\r\n    const [isLiked, setIsLiked] = useState(post.likes.includes(user._id));\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n    const [likesCount, setLikesCount] = useState(post.likes.length);\r\n    const [comments, setComments] = useState(post.comments);\r\n    const [commentsCount, setCommentsCount] = useState(post.comments.length);\r\n    const [showAllComments, setShowAllComments] = useState(false);\r\n    const [newComment, setNewComment] = useState('');\r\n    const commentsField = useRef(null);\r\n    const [chosenEmoji, setChosenEmoji] = useState(null);\r\n    const [isOpenedEmoji, setIsOpenedEmoji] = useState(false);\r\n\r\n    const onEmojiClick = (event, emojiObject) => {\r\n      setChosenEmoji(emojiObject);\r\n    };\r\n\r\n    useEffect(async () => {\r\n        if (isLoaded) {\r\n            const data = await request(`/api/posts/put/${isLiked ? 'like' : 'unlike'}`, 'PUT', {postId: post._id}, {Authorization: `Bearer ${token}`});\r\n            setLikesCount(data.likes.length);\r\n        }\r\n    }, [isLiked]);\r\n\r\n    const likeHandler = () => {\r\n        setIsLoaded(true);\r\n        setIsLiked(!isLiked);\r\n    }\r\n    \r\n    const newCommentHandler = async () => {\r\n        const data = await request(`/api/posts/put/comment`, 'PUT', {postId: post._id, text: newComment}, {Authorization: `Bearer ${token}`});\r\n        setComments(data.comments);\r\n        setNewComment('');\r\n        setCommentsCount(data.comments.length);\r\n        setIsOpenedEmoji(false);\r\n    }\r\n    \r\n    useEffect(() => {\r\n        commentsField.current.classList.toggle('show-comments');\r\n    }, [showAllComments]);\r\n\r\n    useEffect(() => {\r\n        setComments(comments.sort((a, b) => b.timestamp - a.timestamp));\r\n    }, [comments]);\r\n\r\n    useEffect(() => {\r\n        if (chosenEmoji)\r\n        setNewComment(prev => prev + chosenEmoji.emoji)\r\n    }, [chosenEmoji]);\r\n\r\n    return (\r\n        <div className='element'>\r\n            <div className='card'>\r\n                <div className='card-header'>\r\n                    <Link to={user._id !== post.owner._id ? '/profile/' + post.owner._id : '/profile'}><Avatar src={post.owner.profileImg || userPhoto}/><p>{post.owner.displayName}</p></Link>\r\n                </div>\r\n                <div className='card-image'>\r\n                    <img src={post.picture} alt=\"\"/>\r\n                </div>\r\n                <div className='card-content'>\r\n                    <i onClick={likeHandler} className={\"material-icons\"} style={{fontSize: '35px', cursor: 'pointer', color: 'red'}} >{isLiked ? 'favorite' : 'favorite_border'}</i>\r\n                    <small><strong>Likes: {likesCount}</strong></small>\r\n                    <p><strong>{post.owner.displayName}</strong> {post.body}</p>\r\n                    <div><strong className='show-comments-btn' onClick={() => setShowAllComments(!showAllComments)}>{!showAllComments ? 'Show' : 'Hide'} all comments ({commentsCount})</strong></div>\r\n                    <div className={'comments show-comments'} ref={commentsField}>\r\n                        {comments.map(item => <div key={item._id}><strong>{item.owner.displayName}</strong> {item.text}</div>)}\r\n                    </div>\r\n                    <div className='timestamp'>{post.createdAt}</div>\r\n                </div>\r\n                <div className='new-comment'>\r\n                    {isOpenedEmoji && \r\n                    <div style={{position: 'absolute', top: '50px', left: '50%', transform: 'translateX(-50%)', zIndex: '1000'}}>\r\n                        <Picker disableAutoFocus={true} onEmojiClick={onEmojiClick} />\r\n                    </div>}\r\n                    <i onClick={() => setIsOpenedEmoji(!isOpenedEmoji)} className={\"material-icons emojicon\"} style={{fontSize: '35px', cursor: 'pointer', width: '35px'}} >insert_emoticon</i>\r\n                    <input value={newComment} onChange={e => {setNewComment(e.target.value); setIsOpenedEmoji(false);}} onKeyUp={e => (e.keyCode === 13 && newComment) ? newCommentHandler() : false} type='text' placeholder='Add a comment...'/>\r\n                    <button onClick={newCommentHandler} disabled={!newComment}>Publish</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    token: state.auth.token,\r\n    user: state.auth.user,\r\n});\r\n\r\nexport default connect(mapStateToProps)(PostItem);","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\components\\Spinner\\Spinner.js",[],"D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\ProfilePage\\UserProfile.js",["180","181","182","183","184","185","186"],"import { connect } from 'react-redux';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { useHttp } from '../../hooks/http.hook';\r\nimport Spinner from '../../components/Spinner/Spinner';\r\nimport './Profile.scss';\r\nimport { Avatar } from '@material-ui/core';\r\nimport userPhoto from '../../assets/images/user.png'\r\n\r\nconst Profile = (props) => {\r\n    const {error, request, clearError} = useHttp(); \r\n    const [userProfile, setUserProfile] = useState(null);\r\n    const [isFollowing, setIsFollowing] = useState(null);\r\n    const {userId} = useParams();\r\n\r\n    useEffect(async () => {\r\n        const data = await request(`/api/users/get/user/${userId}`, 'GET', null, {\r\n            Authorization: `Bearer ${props.token}`,\r\n        });\r\n        setUserProfile(data)\r\n        console.log(data)\r\n        setIsFollowing(data.user.followers.includes(props.user._id));\r\n    }, []);\r\n\r\n    const followUser = async () => {\r\n        const data = await request(`/api/users/put/follow`, 'PUT', {followId: userId}, {\r\n            Authorization: `Bearer ${props.token}`,\r\n        }); \r\n        \r\n        setUserProfile(prev => {\r\n            prev.user.followers.push('');\r\n            return prev;\r\n        });\r\n\r\n        setIsFollowing(true);\r\n    }\r\n\r\n    const unfollowUser = async () => {\r\n        const data = await request(`/api/users/put/unfollow`, 'PUT', {unfollowId: userId}, {\r\n            Authorization: `Bearer ${props.token}`,\r\n        }); \r\n        \r\n        setUserProfile(prev => {\r\n            prev.user.followers.pop();\r\n            return prev;\r\n        });\r\n\r\n        setIsFollowing(false);\r\n    }\r\n\r\n    const sendMessage = async () => {\r\n        const chatName = 'prompt';\r\n        const firstMsg = 'Hello';\r\n\r\n        // if(chatName && firstMsg) {\r\n            try {\r\n                let chatId = '';\r\n\r\n                const data = await request('/api/chats/new/conversation', 'POST', {chatName, other: userId}, {Authorization: `Bearer ${props.token}`});\r\n\r\n                chatId = data._id\r\n\r\n                await request(`/api/chats/new/message?id=${chatId}`, 'POST', {\r\n                    message: firstMsg,\r\n                    timestamp: Date.now()\r\n                }, {Authorization: `Bearer ${props.token}`});\r\n            } catch(err) {console.log(err)}\r\n        // }\r\n    }\r\n    \r\n    return(\r\n        <>\r\n        {\r\n            !userProfile ?\r\n            <Spinner />\r\n            :\r\n            <div className='profile-page'>\r\n                <div className='profile__info'>\r\n                    <div>\r\n                        <Avatar src={userProfile.profileImg || userPhoto}/>                    </div> \r\n                    <div>\r\n                        <h4>{userProfile.user.displayName}</h4>\r\n                        <div className='profile__info-attributes'>\r\n                            <h5>{userProfile.posts.length} posts</h5>\r\n                            <h5>{userProfile.user.followers.length} followers</h5>\r\n                            <h5>{userProfile.user.following.length} following</h5>\r\n                        </div>\r\n                        {\r\n                            isFollowing ? \r\n                            <button onClick={unfollowUser}>Unfollow</button>\r\n                            :\r\n                            <button onClick={followUser}>Follow</button>\r\n                        }\r\n                        \r\n                        <button onClick={sendMessage}>Send hello message</button>\r\n                    </div>\r\n                </div>\r\n                <div className='profile__gallery'>\r\n                    {userProfile.posts.map(post => <img key={post._id} src={post.picture} alt=\"\"/>)}\r\n                </div>\r\n            </div>\r\n        }\r\n        </>        \r\n    )\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        token: state.auth.token,\r\n        user: state.auth.user\r\n    }\r\n}\r\n\r\n// let mapDispatchToProps = (dispatch) => {\r\n//     return {\r\n//         setDialogs: (dialogs) => {\r\n//             dispatch(setDialogsAC(dialogs));\r\n//         }\r\n//     }\r\n// }\r\n\r\nexport default connect(mapStateToProps)(Profile);","D:\\xampp73\\xampp\\htdocs\\react\\Social-Network\\client\\src\\pages\\UsersPage\\Users.js",[],{"ruleId":"187","replacedBy":"188"},{"ruleId":"189","replacedBy":"190"},{"ruleId":"191","severity":1,"message":"192","line":1,"column":17,"nodeType":"193","messageId":"194","endLine":1,"endColumn":26},{"ruleId":"191","severity":1,"message":"195","line":1,"column":28,"nodeType":"193","messageId":"194","endLine":1,"endColumn":38},{"ruleId":"191","severity":1,"message":"196","line":3,"column":34,"nodeType":"193","messageId":"194","endLine":3,"endColumn":44},{"ruleId":"197","severity":1,"message":"198","line":28,"column":8,"nodeType":"199","endLine":28,"endColumn":25,"suggestions":"200"},{"ruleId":"197","severity":1,"message":"201","line":22,"column":17,"nodeType":"202","endLine":22,"endColumn":83},{"ruleId":"203","severity":1,"message":"204","line":56,"column":20,"nodeType":"205","messageId":"206","endLine":56,"endColumn":22},{"ruleId":"191","severity":1,"message":"207","line":12,"column":12,"nodeType":"193","messageId":"194","endLine":12,"endColumn":17},{"ruleId":"191","severity":1,"message":"208","line":12,"column":28,"nodeType":"193","messageId":"194","endLine":12,"endColumn":38},{"ruleId":"197","severity":1,"message":"209","line":22,"column":15,"nodeType":"210","endLine":31,"endColumn":6},{"ruleId":"197","severity":1,"message":"211","line":31,"column":8,"nodeType":"199","endLine":31,"endColumn":21,"suggestions":"212"},{"ruleId":"213","severity":1,"message":"214","line":85,"column":69,"nodeType":"215","endLine":85,"endColumn":100},{"ruleId":"213","severity":1,"message":"214","line":87,"column":67,"nodeType":"215","endLine":87,"endColumn":98},{"ruleId":"213","severity":1,"message":"214","line":131,"column":85,"nodeType":"215","endLine":131,"endColumn":88},{"ruleId":"213","severity":1,"message":"214","line":131,"column":109,"nodeType":"215","endLine":131,"endColumn":112},{"ruleId":"191","severity":1,"message":"216","line":3,"column":8,"nodeType":"193","messageId":"194","endLine":3,"endColumn":14},{"ruleId":"191","severity":1,"message":"207","line":12,"column":12,"nodeType":"193","messageId":"194","endLine":12,"endColumn":17},{"ruleId":"191","severity":1,"message":"208","line":12,"column":28,"nodeType":"193","messageId":"194","endLine":12,"endColumn":38},{"ruleId":"197","severity":1,"message":"209","line":14,"column":15,"nodeType":"210","endLine":20,"endColumn":6},{"ruleId":"197","severity":1,"message":"211","line":20,"column":8,"nodeType":"199","endLine":20,"endColumn":10,"suggestions":"217"},{"ruleId":"191","severity":1,"message":"218","line":3,"column":9,"nodeType":"193","messageId":"194","endLine":3,"endColumn":13},{"ruleId":"191","severity":1,"message":"219","line":17,"column":12,"nodeType":"193","messageId":"194","endLine":17,"endColumn":19},{"ruleId":"191","severity":1,"message":"207","line":17,"column":21,"nodeType":"193","messageId":"194","endLine":17,"endColumn":26},{"ruleId":"191","severity":1,"message":"208","line":17,"column":37,"nodeType":"193","messageId":"194","endLine":17,"endColumn":47},{"ruleId":"197","severity":1,"message":"220","line":28,"column":8,"nodeType":"199","endLine":28,"endColumn":10,"suggestions":"221"},{"ruleId":"197","severity":1,"message":"222","line":49,"column":8,"nodeType":"199","endLine":49,"endColumn":18,"suggestions":"223"},{"ruleId":"191","severity":1,"message":"224","line":67,"column":9,"nodeType":"193","messageId":"194","endLine":67,"endColumn":18},{"ruleId":"191","severity":1,"message":"225","line":7,"column":10,"nodeType":"193","messageId":"194","endLine":7,"endColumn":24},{"ruleId":"191","severity":1,"message":"226","line":9,"column":10,"nodeType":"193","messageId":"194","endLine":9,"endColumn":16},{"ruleId":"191","severity":1,"message":"207","line":21,"column":12,"nodeType":"193","messageId":"194","endLine":21,"endColumn":17},{"ruleId":"191","severity":1,"message":"208","line":21,"column":28,"nodeType":"193","messageId":"194","endLine":21,"endColumn":38},{"ruleId":"191","severity":1,"message":"219","line":22,"column":12,"nodeType":"193","messageId":"194","endLine":22,"endColumn":19},{"ruleId":"191","severity":1,"message":"227","line":22,"column":21,"nodeType":"193","messageId":"194","endLine":22,"endColumn":31},{"ruleId":"197","severity":1,"message":"228","line":48,"column":8,"nodeType":"199","endLine":48,"endColumn":10,"suggestions":"229"},{"ruleId":"191","severity":1,"message":"230","line":9,"column":8,"nodeType":"193","messageId":"194","endLine":9,"endColumn":15},{"ruleId":"191","severity":1,"message":"219","line":12,"column":12,"nodeType":"193","messageId":"194","endLine":12,"endColumn":19},{"ruleId":"191","severity":1,"message":"207","line":12,"column":21,"nodeType":"193","messageId":"194","endLine":12,"endColumn":26},{"ruleId":"191","severity":1,"message":"208","line":12,"column":37,"nodeType":"193","messageId":"194","endLine":12,"endColumn":47},{"ruleId":"197","severity":1,"message":"231","line":64,"column":8,"nodeType":"199","endLine":64,"endColumn":27,"suggestions":"232"},{"ruleId":"191","severity":1,"message":"218","line":3,"column":10,"nodeType":"193","messageId":"194","endLine":3,"endColumn":14},{"ruleId":"191","severity":1,"message":"207","line":13,"column":12,"nodeType":"193","messageId":"194","endLine":13,"endColumn":17},{"ruleId":"191","severity":1,"message":"208","line":13,"column":28,"nodeType":"193","messageId":"194","endLine":13,"endColumn":38},{"ruleId":"191","severity":1,"message":"233","line":16,"column":19,"nodeType":"193","messageId":"194","endLine":16,"endColumn":27},{"ruleId":"197","severity":1,"message":"209","line":23,"column":15,"nodeType":"210","endLine":35,"endColumn":6},{"ruleId":"197","severity":1,"message":"211","line":35,"column":8,"nodeType":"199","endLine":35,"endColumn":10,"suggestions":"234"},{"ruleId":"191","severity":1,"message":"235","line":78,"column":11,"nodeType":"193","messageId":"194","endLine":78,"endColumn":21},{"ruleId":"191","severity":1,"message":"236","line":79,"column":15,"nodeType":"193","messageId":"194","endLine":79,"endColumn":19},{"ruleId":"191","severity":1,"message":"219","line":11,"column":12,"nodeType":"193","messageId":"194","endLine":11,"endColumn":19},{"ruleId":"191","severity":1,"message":"207","line":11,"column":21,"nodeType":"193","messageId":"194","endLine":11,"endColumn":26},{"ruleId":"191","severity":1,"message":"208","line":11,"column":37,"nodeType":"193","messageId":"194","endLine":11,"endColumn":47},{"ruleId":"197","severity":1,"message":"209","line":27,"column":15,"nodeType":"210","endLine":32,"endColumn":6},{"ruleId":"197","severity":1,"message":"237","line":32,"column":8,"nodeType":"199","endLine":32,"endColumn":17,"suggestions":"238"},{"ruleId":"191","severity":1,"message":"218","line":3,"column":10,"nodeType":"193","messageId":"194","endLine":3,"endColumn":14},{"ruleId":"191","severity":1,"message":"207","line":11,"column":12,"nodeType":"193","messageId":"194","endLine":11,"endColumn":17},{"ruleId":"191","severity":1,"message":"208","line":11,"column":28,"nodeType":"193","messageId":"194","endLine":11,"endColumn":38},{"ruleId":"197","severity":1,"message":"209","line":16,"column":15,"nodeType":"210","endLine":23,"endColumn":6},{"ruleId":"197","severity":1,"message":"239","line":23,"column":8,"nodeType":"199","endLine":23,"endColumn":10,"suggestions":"240"},{"ruleId":"191","severity":1,"message":"236","line":26,"column":15,"nodeType":"193","messageId":"194","endLine":26,"endColumn":19},{"ruleId":"191","severity":1,"message":"236","line":39,"column":15,"nodeType":"193","messageId":"194","endLine":39,"endColumn":19},"no-native-reassign",["241"],"no-negated-in-lhs",["242"],"no-unused-vars","'createRef' is defined but never used.","Identifier","unusedVar","'forwardRef' is defined but never used.","'HashRouter' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fixOffset'. Either include it or remove the dependency array.","ArrayExpression",["243"],"Assignments to the 'width' variable from inside React Hook useEffect will be lost after each render. To preserve the value over time, store it in a useRef Hook and keep the mutable value in the '.current' property. Otherwise, you can move this variable directly inside useEffect.","CallExpression","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'error' is assigned a value but never used.","'clearError' is assigned a value but never used.","Effect callbacks are synchronous to prevent race conditions. Put the async function inside:\n\nuseEffect(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching","ArrowFunctionExpression","React Hook useEffect has missing dependencies: 'props.token' and 'request'. Either include them or remove the dependency array.",["244"],"jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","'Slider' is defined but never used.",["245"],"'Link' is defined but never used.","'loading' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'props.extra' and 'props.user._id'. Either include them or remove the dependency array.",["246"],"React Hook useEffect has a missing dependency: 'getLastMessage'. Either include it or remove the dependency array.",["247"],"'timestamp' is assigned a value but never used.","'SearchOutlined' is defined but never used.","'Button' is defined but never used.","'setLoading' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'getDialogs'. Either include it or remove the dependency array.",["248"],"'btnBack' is defined but never used.","React Hook useEffect has missing dependencies: 'props' and 'request'. Either include them or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["249"],"'setTitle' is assigned a value but never used.",["250"],"'deletePost' is assigned a value but never used.","'data' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'isLoaded', 'post._id', 'request', and 'token'. Either include them or remove the dependency array.",["251"],"React Hook useEffect has missing dependencies: 'props.token', 'props.user._id', 'request', and 'userId'. Either include them or remove the dependency array. If 'setIsFollowing' needs the current value of 'props.user._id', you can also switch to useReducer instead of useState and read 'props.user._id' in the reducer.",["252"],"no-global-assign","no-unsafe-negation",{"desc":"253","fix":"254"},{"desc":"255","fix":"256"},{"desc":"257","fix":"258"},{"desc":"259","fix":"260"},{"desc":"261","fix":"262"},{"desc":"263","fix":"264"},{"desc":"265","fix":"266"},{"desc":"257","fix":"267"},{"desc":"268","fix":"269"},{"desc":"270","fix":"271"},"Update the dependencies array to be: [fixOffset, isAuthenticated]",{"range":"272","text":"273"},"Update the dependencies array to be: [props.token, request, searchUsers]",{"range":"274","text":"275"},"Update the dependencies array to be: [props.token, request]",{"range":"276","text":"277"},"Update the dependencies array to be: [props.extra, props.user._id]",{"range":"278","text":"279"},"Update the dependencies array to be: [getLastMessage, props.id]",{"range":"280","text":"281"},"Update the dependencies array to be: [getDialogs]",{"range":"282","text":"283"},"Update the dependencies array to be: [props, props.chat.chatId, request]",{"range":"284","text":"285"},{"range":"286","text":"277"},"Update the dependencies array to be: [isLiked, isLoaded, post._id, request, token]",{"range":"287","text":"288"},"Update the dependencies array to be: [props.token, props.user._id, request, userId]",{"range":"289","text":"290"},[949,966],"[fixOffset, isAuthenticated]",[1096,1109],"[props.token, request, searchUsers]",[744,746],"[props.token, request]",[1022,1024],"[props.extra, props.user._id]",[1631,1641],"[getLastMessage, props.id]",[1702,1704],"[getDialogs]",[2175,2194],"[props, props.chat.chatId, request]",[1554,1556],[1469,1478],"[isLiked, isLoaded, post._id, request, token]",[933,935],"[props.token, props.user._id, request, userId]"]