(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(27),r=n(8),a={dialogs:[],messages:[],chat:{},isDialogSelected:!1},i=function(e){return{type:"SET_MESSAGES",messages:e}},o=function(e){return{type:"SET_DIALOGS",dialogs:e}},l=function(e){return{type:"SET_CHAT",chat:e}},u=function(e){return{type:"SET_IS_DIALOG_SELECTED",isDialogSelected:e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":return Object(r.a)({},e);case"SET_MESSAGES":return Object(r.a)(Object(r.a)({},e),{},{newMessageBody:"",messages:t.messages});case"SET_DIALOGS":return Object(r.a)(Object(r.a)({},e),{},{dialogs:t.dialogs});case"SET_CHAT":return Object(r.a)(Object(r.a)({},e),{},{chat:t.chat});case"SET_IS_DIALOG_SELECTED":return Object(r.a)(Object(r.a)({},e),{},{isDialogSelected:t.isDialogSelected});default:return e}},d={token:null,user:{}},b=function(e,t){return{type:"LOGIN",jwtSecret:e,user:t}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return sessionStorage.setItem("storageName",JSON.stringify({token:t.jwtSecret,user:t.user})),Object(r.a)(Object(r.a)({},e),{},{token:t.jwtSecret,user:t.user});case"LOGOUT":return sessionStorage.removeItem("storageName"),Object(r.a)(Object(r.a)({},e),{},{token:null,user:{}});default:return e}},O=Object(s.b)({dialogsPage:j,auth:h}),p=Object(s.c)(O),m=n(1),f=n(19),x=n.n(f),g=(n(60),n(61),n(11)),v=n(9),w=n(3),k=n.n(w),N=n(5),S=n(4),y=n(7),_=function(){var e=Object(m.useState)(!1),t=Object(S.a)(e,2),n=t[0],c=t[1],s=Object(m.useState)(null),r=Object(S.a)(s,2),a=r[0],i=r[1];return{loading:n,error:a,request:Object(m.useCallback)(function(){var e=Object(N.a)(k.a.mark((function e(t){var n,s,r,a,o,l=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",s=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]?l[3]:{},e.prev=3,s&&(s=JSON.stringify(s),r["Content-Type"]="application/json"),e.next=7,fetch("https://kalinaserver.herokuapp.com".concat(t),{method:n,body:s,headers:r});case 7:return a=e.sent,e.next=10,a.json();case 10:if(o=e.sent,a.ok){e.next=13;break}throw new Error(o.message||"Something goes wrong");case 13:return c(!1),e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(3),c(!1),i(e.t0.message),e.t0;case 22:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),[]),clearError:Object(m.useCallback)((function(){return i(null)}),[])}},E=(n(66),n(96)),C=Object(y.b)((function(e){return{token:e.auth.token,user:e.auth.user}}),(function(e){return{logout:function(){e({type:"LOGOUT"})}}}))((function(e){var t=e.logout,n=Object(v.f)(),s=_(),r=(s.error,s.request),a=(s.clearError,Object(m.useState)("")),i=Object(S.a)(a,2),o=i[0],l=i[1],u=Object(m.useState)([]),j=Object(S.a)(u,2),d=j[0],b=j[1];return document.onmouseup=function(e){var t=document.querySelector(".search-user");e.path.includes(t)||(b([]),l(""))},Object(m.useEffect)(Object(N.a)(k.a.mark((function t(){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=13;break}return t.prev=1,t.next=4,r("/api/users/post/users-search","POST",{query:o},{Authorization:"Bearer ".concat(e.token)});case 4:n=t.sent,b(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:t.next=14;break;case 13:b([]);case 14:case"end":return t.stop()}}),t,null,[[1,8]])}))),[o]),Object(c.jsx)("div",{className:"header-wrapper",children:Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)("span",{className:"label",children:Object(c.jsx)(g.b,{to:"/",children:Object(c.jsx)("big",{children:"Kalina"})})}),Object(c.jsxs)("div",{className:"search-user",children:[Object(c.jsx)("i",{className:"material-icons",style:{position:"absolute",top:"50%",transform:"translateY(-50%)"},children:"search"}),Object(c.jsx)("input",{type:"text",placeholder:"Search users...",id:"search-input",value:o,onChange:function(e){return l(e.target.value)}}),0!==d.length&&Object(c.jsx)("div",{className:"dropdown-content",children:d.map((function(t){return Object(c.jsx)(g.b,{to:e.user._id!==t._id?"/profile/"+t._id:"/profile",onClick:function(){return l("")},children:Object(c.jsxs)("div",{children:[Object(c.jsx)(E.a,{src:t.profileImg}),Object(c.jsx)("p",{children:t.displayName})]})},t._id)}))})]}),Object(c.jsxs)("div",{className:"navigation",children:[Object(c.jsx)(g.b,{to:"/",children:Object(c.jsx)("i",{className:"material-icons",children:"home"})}),Object(c.jsx)(g.b,{to:"/profile",children:Object(c.jsx)("i",{className:"material-icons",children:"person"})}),Object(c.jsx)(g.b,{to:"/dialogs",children:Object(c.jsx)("i",{className:"material-icons",children:"message"})}),Object(c.jsx)(g.b,{to:"/users",children:Object(c.jsx)("i",{className:"material-icons",children:"people"})}),Object(c.jsx)(g.b,{to:"/",onClick:function(e){e.preventDefault(),t(),n.push("/")},children:Object(c.jsx)("i",{className:"material-icons",children:"exit_to_app"})})]})]})})})),I=(n(68),n(69),n(70),n(22)),T=n.n(I),D=function(e){var t=new Date(e),n=new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().split("T");return{date:n[0],time:n[1].replace(/:\d+\..*$/g,"")}},A=new T.a("b634efb073fba40fbf3a",{cluster:"eu"}),z=Object(y.b)((function(e){return{dialogs:e.dialogsPage.dialogs,token:e.auth.token,user:e.auth.user}}),(function(e){return{setDialogs:function(t){e(o(t))},setMessages:function(t){e(i(t))},setChat:function(t){e(l(t))},setIsDialogSelected:function(t){e(u(t))}}}))((function(e){var t=_(),n=(t.loading,t.error,t.request),s=(t.clearError,Object(m.useState)({})),r=Object(S.a)(s,2),a=r[0],i=r[1],o=Object(m.useState)(!1),l=Object(S.a)(o,2),u=l[0],j=l[1],d=Object(m.useState)({}),b=Object(S.a)(d,2),h=b[0],O=b[1];Object(m.useEffect)((function(){return e.extra.forEach((function(t){t.id!==e.user._id&&O(t)})),function(){return e.setIsDialogSelected(!1)}}),[]);var p=function(){var t=Object(N.a)(k.a.mark((function t(){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("/api/chats/get/lastMessage?id=".concat(e.id),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:c=t.sent,i(c),j(!0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();Object(m.useEffect)((function(){p();var e=A.subscribe("messages");return e.bind("newMessage",(function(){p()})),function(){e.unbind_all(),e.unsubscribe()}}),[e.id]);var f=function(){var t=Object(N.a)(k.a.mark((function t(){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("/api/chats/get/conversation?id=".concat(e.id),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:c=t.sent,e.setMessages(c.conversation),e.setChat({chatName:h.displayName||c.chatName,chatImg:h.profileImg||c.chatImg,participantId:h.id,chatId:e.id}),e.setIsDialogSelected(!0),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Object(c.jsx)(c.Fragment,{children:u&&Object(c.jsx)("div",{onClick:f,className:"dialogItem",children:Object(c.jsxs)("div",{className:"dialogItem__info",children:[Object(c.jsx)("div",{className:"dialogItem__info-avatar",children:Object(c.jsx)(E.a,{src:h.profileImg})}),Object(c.jsxs)("div",{className:"dialogItem__info-main",children:[Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:e.name||h.displayName})}),Object(c.jsxs)("span",{className:"dialogItem__info-message",children:[a.owner.displayName,": ",a.message]})]}),Object(c.jsxs)("div",{className:"timeStamp",children:[Object(c.jsx)("div",{children:D(parseInt(a.timestamp)).date}),Object(c.jsx)("div",{children:D(parseInt(a.timestamp)).time})]})]})})})})),P=(n(71),function(){return Object(c.jsx)("div",{className:"wrapper",children:Object(c.jsxs)("div",{className:"lds-ellipsis",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})})}),B=new T.a("b634efb073fba40fbf3a",{cluster:"eu"}),L=Object(y.b)((function(e){return{dialogs:e.dialogsPage.dialogs,isDialogSelected:e.dialogsPage.isDialogSelected,user:e.auth.user,token:e.auth.token}}),(function(e){return{setDialogs:function(t){e(o(t))}}}))((function(e){var t=_(),n=(t.error,t.request),s=(t.clearError,Object(m.useState)(!0)),r=Object(S.a)(s,2),a=r[0],i=r[1],o=Object(m.useState)(""),l=Object(S.a)(o,2),u=l[0],j=l[1],d=Object(m.useRef)(null),b=Object(m.useRef)(null),h=Object(m.useRef)(null),O=function(){var t=Object(N.a)(k.a.mark((function t(){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("/api/chats/get/conversations","GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:c=t.sent,e.setDialogs(c),i(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(m.useEffect)((function(){e.isDialogSelected?d.current.classList.remove("show"):d.current.classList.add("show")}),[e.isDialogSelected]),Object(m.useEffect)((function(){O(),B.subscribe("chats").bind("newChat",(function(){O()}))}),[]),Object(c.jsxs)("div",{ref:d,className:"dialogs show",children:[Object(c.jsx)("div",{ref:b,className:"dialogs__header",children:Object(c.jsxs)("div",{className:"search-chats",children:[Object(c.jsx)("i",{className:"material-icons",style:{position:"absolute",top:"50%",transform:"translateY(-50%)",paddingLeft:"5px"},children:"search"}),Object(c.jsx)("input",{type:"text",placeholder:"Search the chat or start new",id:"search-chats-input",value:u,onChange:function(e){return j(e.target.value)}}),Object(c.jsx)("i",{className:"material-icons",style:{position:"absolute",top:"50%",right:"0",transform:"translateY(-50%)",paddingRight:"5px",opacity:".5"},children:"add"})]})}),Object(c.jsx)("div",{ref:h,className:"dialogs__items",children:a?Object(c.jsx)(P,{}):e.dialogs.map((function(e){return Object(c.jsx)(z,{name:e.name,img:e.chatImg,id:e.id,timestamp:e.timestamp,extra:e.extra},e.id)}))})]})})),q=n(95),G=n(93),F=n(94),M=(n(72),n(73),function(e){var t=D(parseInt(e.message.timestamp));return Object(c.jsxs)("div",{className:"messages__item  ".concat(e.message.owner._id===e.userId&&"messages__receiver"),children:[Object(c.jsx)("span",{className:"message__name",children:e.message.owner.displayName}),Object(c.jsx)("div",{className:"message",children:e.message.message}),Object(c.jsx)("span",{className:"message__timestamp",children:t.date+" "+t.time})]})}),U=n(37),H=n.n(U),J=(n(74),function(){return Object(c.jsx)("div",{className:"loadingio-spinner-spinner-owwc8nyxhkf",children:Object(c.jsxs)("div",{className:"ldio-wt50jy4ikwl",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})})}),R=function(e){var t=_(),n=(t.loading,t.error,t.request),s=(t.clearError,Object(m.useState)("")),r=Object(S.a)(s,2),a=r[0],i=r[1],o=Object(m.useState)(!1),l=Object(S.a)(o,2),u=l[0],j=l[1],d=Object(m.useState)(!1),b=Object(S.a)(d,2),h=b[0],O=b[1],p=Object(m.useState)(null),f=Object(S.a)(p,2),x=f[0],v=f[1],w=Object(m.useRef)(null);Object(m.useEffect)((function(){return document.onmouseup=function(e){w.current.focus();var t=document.querySelector(".emojiDiv");e.path.includes(t)||j(!1)},function(){return document.onmouseup=null}}),[u]);var y=function(){var t=Object(N.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(""),j(!1),O(!0),t.prev=3,t.next=6,n("/api/chats/new/message?id=".concat(e.chat.chatId),"POST",{message:a,timestamp:Date.now()},{Authorization:"Bearer ".concat(e.token)});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(){return t.apply(this,arguments)}}(),C=function(){try{var e=document.querySelector(".messages__body");e.scrollTop=e.scrollHeight}catch(t){}};return Object(m.useEffect)((function(){return window.addEventListener("resize",(function(){return C()})),w.current.focus(),function(){return window.removeEventListener("resize",(function(){return C()}))}}),[]),Object(m.useEffect)((function(){var t=new T.a("b634efb073fba40fbf3a",{cluster:"eu"}).subscribe("messages");return t.bind("newMessage",Object(N.a)(k.a.mark((function t(){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n("/api/chats/get/conversation?id=".concat(e.chat.chatId),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:c=t.sent,e.setMessages(c.conversation),C(),O(!1),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))),C(),function(){t.unbind_all(),t.unsubscribe()}}),[e.chat.chatId]),Object(m.useEffect)((function(){x&&i((function(e){return e+x.emoji}))}),[x]),Object(c.jsxs)("div",{className:"messages",children:[Object(c.jsxs)("div",{className:"messages__header",children:[Object(c.jsx)("div",{className:"btnBack",style:{height:"50px",width:"30px"},children:Object(c.jsx)("i",{onClick:function(){return e.setIsDialogSelected(!1)},className:"material-icons",style:{fontSize:"50px",position:"absolute",left:"-5px"},children:"chevron_left"})}),Object(c.jsx)("div",{className:"messages__headerInfo",children:Object(c.jsxs)(g.b,{to:"/profile/"+e.chat.participantId,children:[Object(c.jsx)(E.a,{src:e.chat.chatImg}),Object(c.jsx)("div",{children:Object(c.jsx)("p",{children:e.chat.chatName})})]})}),Object(c.jsxs)("div",{className:"messages__headerRight",children:[Object(c.jsx)(q.a,{children:Object(c.jsx)(G.a,{})}),Object(c.jsx)(q.a,{children:Object(c.jsx)(F.a,{})})]})]}),Object(c.jsx)("div",{className:"messages__body",children:e.messages.map((function(t){return Object(c.jsx)(M,{userId:e.user._id,message:t},t._id)}))}),Object(c.jsxs)("div",{className:"messages__footer",children:[Object(c.jsx)("i",{onClick:function(){return j(!u)},className:"material-icons emojicon",style:{fontSize:"35px",cursor:"pointer",width:"35px"},children:"insert_emoticon"}),Object(c.jsx)("input",{ref:w,value:a,onChange:function(e){i(e.target.value),j(!1)},onKeyUp:function(e){return!(13!==e.keyCode||!a)&&y()},type:"text",placeholder:"Enter your message"}),Object(c.jsxs)("button",{onClick:y,disabled:!a,children:[Object(c.jsx)("i",{className:"material-icons",style:{fontSize:"35px",cursor:"pointer",width:"35px"},children:"send"}),h&&Object(c.jsx)(J,{})]})]}),u&&Object(c.jsx)("div",{className:"emojiDiv",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"1000"},children:Object(c.jsx)(H.a,{disableAutoFocus:!0,onEmojiClick:function(e,t){v(t)}})})]})},Y=Object(y.b)((function(e){return{messages:e.dialogsPage.messages,chat:e.dialogsPage.chat,user:e.auth.user,token:e.auth.token}}),(function(e){return{sendMessage:function(){e({type:"SEND_MESSAGE"})},setMessages:function(t){e(i(t))},setChat:function(t){e(l(t))},setIsDialogSelected:function(t){e(u(t))}}}))(R),K=Object(y.b)((function(e){return{isDialogSelected:e.dialogsPage.isDialogSelected}}))((function(e){return Object(c.jsxs)("div",{className:"dialogs-page",children:[Object(c.jsx)(L,{}),e.isDialogSelected?Object(c.jsx)(Y,{}):Object(c.jsx)("div",{className:"chooseChat",children:"Choose a chat"})]})})),W=n(49),$=(n(44),Object(y.b)((function(e){return{token:e.auth.token,user:e.auth.user}}))((function(e){var t=e.post,n=e.token,s=e.user,r=_(),a=(r.loading,r.error,r.request),i=(r.clearError,Object(m.useState)(t.likes.includes(s._id))),o=Object(S.a)(i,2),l=o[0],u=o[1],j=Object(m.useState)(!1),d=Object(S.a)(j,2),b=d[0],h=d[1],O=Object(m.useState)(t.likes.length),p=Object(S.a)(O,2),f=p[0],x=p[1],v=Object(m.useState)(t.comments),w=Object(S.a)(v,2),y=w[0],C=w[1],I=Object(m.useState)(t.comments.length),T=Object(S.a)(I,2),A=T[0],z=T[1],P=Object(m.useState)(!1),B=Object(S.a)(P,2),L=B[0],q=B[1],G=Object(m.useState)(""),F=Object(S.a)(G,2),M=F[0],U=F[1],J=Object(m.useRef)(null),R=Object(m.useState)(null),Y=Object(S.a)(R,2),K=Y[0],W=Y[1],$=Object(m.useState)(!1),Q=Object(S.a)($,2),V=Q[0],X=Q[1],Z=D(t.createdAt);Object(m.useEffect)((function(){return document.onmouseup=function(e){var t=document.querySelector(".emojiDiv");e.path.includes(t)||X(!1)},function(){return document.onmouseup=null}}),[V]),Object(m.useEffect)(Object(N.a)(k.a.mark((function e(){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=5;break}return e.next=3,a("/api/posts/put/".concat(l?"like":"unlike"),"PUT",{postId:t._id},{Authorization:"Bearer ".concat(n)});case 3:c=e.sent,x(c.likes.length);case 5:case"end":return e.stop()}}),e)}))),[l]);var ee=function(){var e=Object(N.a)(k.a.mark((function e(){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("/api/posts/put/comment","PUT",{postId:t._id,text:M},{Authorization:"Bearer ".concat(n)});case 2:c=e.sent,C(c.comments),U(""),z(c.comments.length),X(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.useEffect)((function(){J.current.classList.toggle("show-comments")}),[L]),Object(m.useEffect)((function(){K&&U((function(e){return e+K.emoji}))}),[K]),Object(c.jsx)("div",{className:"element",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header",children:Object(c.jsxs)(g.b,{to:s._id!==t.owner._id?"/profile/"+t.owner._id:"/profile",children:[Object(c.jsx)(E.a,{src:t.owner.profileImg}),Object(c.jsx)("p",{children:t.owner.displayName})]})}),Object(c.jsx)("div",{className:"card-image",children:Object(c.jsx)("img",{src:t.picture,alt:""})}),Object(c.jsxs)("div",{className:"card-content",children:[Object(c.jsx)("i",{onClick:function(){h(!0),u(!l)},className:"material-icons",style:{fontSize:"35px",cursor:"pointer",color:"red"},children:l?"favorite":"favorite_border"}),Object(c.jsx)("small",{children:Object(c.jsxs)("strong",{children:["Likes: ",f]})}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:t.owner.displayName})," ",t.body]}),Object(c.jsx)("div",{children:Object(c.jsxs)("strong",{className:"show-comments-btn",onClick:function(){return q(!L)},children:[L?"Hide":"Show"," all comments (",A,")"]})}),Object(c.jsx)("div",{className:"comments show-comments",ref:J,children:y.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:e.owner.displayName})," ",e.text]},e._id)}))}),Object(c.jsx)("div",{className:"timestamp",children:Z.date+" "+Z.time})]}),Object(c.jsxs)("div",{className:"new-comment",children:[V&&Object(c.jsx)("div",{className:"emojiDiv",style:{position:"absolute",bottom:"20px",left:"50%",transform:"translate(-50%, -32px)",zIndex:"1000"},children:Object(c.jsx)(H.a,{disableAutoFocus:!0,onEmojiClick:function(e,t){return W(t)}})}),Object(c.jsx)("i",{onClick:function(){return X(!V)},className:"material-icons emojicon",style:{fontSize:"35px",cursor:"pointer",width:"35px"},children:"insert_emoticon"}),Object(c.jsx)("input",{value:M,onChange:function(e){U(e.target.value),X(!1)},onKeyUp:function(e){return!(13!==e.keyCode||!M)&&ee()},type:"text",placeholder:"Add a comment..."}),Object(c.jsx)("button",{onClick:ee,disabled:!M,children:"Publish"})]})]})})})));var Q=function(e){return new Promise((function(t,n){if("string"===typeof e)r(e).then((function(e){return t(e)}));else{0===e.length&&t(e);for(var c=function(n){r(e[n].picture).then((function(c){e[n].params=c,n+1===e.length&&t(e)}))},s=0;s<e.length;++s)c(s)}function r(e){var t=document.createElement("img");return t.src=e,new Promise((function(e,n){t.onload=function(){e(t.width>=t.height?{height:"100%",minWidth:"100%",width:"none",minHeight:"none"}:{height:"none",minWidth:"none",width:"100%",minHeight:"100%"})}}))}}))},V=Object(y.b)((function(e){return{token:e.auth.token,user:e.auth.user}}),(function(e){return{login:function(t,n){e(b(t,n))}}}))((function(e){var t=_(),n=(t.error,t.request),s=(t.clearError,Object(m.useState)(!1)),r=Object(S.a)(s,2),a=r[0],i=r[1],o=Object(m.useState)(!1),l=Object(S.a)(o,2),u=l[0],j=l[1],d=Object(m.useState)(!1),b=Object(S.a)(d,2),h=b[0],O=b[1],p=Object(m.useState)(""),f=Object(S.a)(p,2),x=f[0],g=f[1],v=Object(m.useState)(""),w=Object(S.a)(v,2),y=w[0],E=w[1],C=Object(m.useState)(""),I=Object(S.a)(C,2),T=I[0],D=I[1],A=Object(m.useState)(null),z=Object(S.a)(A,2),B=z[0],L=z[1],q=Object(m.useState)(null),G=Object(S.a)(q,2),F=G[0],M=G[1],U=Object(m.useState)(null),H=Object(S.a)(U,2),J=H[0],R=H[1],Y=Object(m.useState)(!1),K=Object(S.a)(Y,2),V=K[0],X=K[1],Z=Object(m.useState)(null),ee=Object(S.a)(Z,2),te=ee[0],ne=ee[1];Object(m.useEffect)(Object(N.a)(k.a.mark((function t(){var c,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/api/posts/get/myposts","GET",null,{Authorization:"Bearer ".concat(e.token)});case 2:return c=t.sent,t.next=5,n("/api/users/get/myfollowdata","GET",null,{Authorization:"Bearer ".concat(e.token)});case 5:s=t.sent,M(s),Q(c.posts).then((function(e){L(e)})),Q(e.user.profileImg).then((function(e){R(e)}));case 9:case"end":return t.stop()}}),t)}))),[]);var ce=function(){var t=Object(N.a)(k.a.mark((function t(){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X(!0),(c=new FormData).append("file",y),c.append("upload_preset","kalina-why-not"),c.append("cloud_name","kalina-why-not"),t.next=7,fetch("https://api.cloudinary.com/v1_1/kalina-why-not/image/upload",{method:"POST",body:c}).then((function(e){return e.json()})).then(function(){var t=Object(N.a)(k.a.mark((function t(c){var s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/api/posts/new/post","POST",{body:x,picture:c.url},{Authorization:"Bearer ".concat(e.token)});case 2:s=t.sent,Q([s]).then((function(e){L([e[0]].concat(Object(W.a)(B))),X(!1),i(!1)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){X(!1),alert(e)}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),se=function(){var t=Object(N.a)(k.a.mark((function t(){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(X(!0),c=new FormData,T){t.next=6;break}return alert("Error: please, choose an image"),X(!1),t.abrupt("return");case 6:return c.append("file",T),c.append("upload_preset","kalina-why-not"),c.append("cloud_name","kalina-why-not"),t.next=11,fetch("https://api.cloudinary.com/v1_1/kalina-why-not/image/upload",{method:"POST",body:c}).then((function(e){return e.json()})).then(function(){var t=Object(N.a)(k.a.mark((function t(c){var s,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/api/users/put/profileImg","PUT",{picture:c.url},{Authorization:"Bearer ".concat(e.token)});case 2:s=t.sent,sessionStorage.setItem("storageName",JSON.stringify({token:e.token,user:s})),(r=JSON.parse(sessionStorage.getItem("storageName")))&&r.token&&e.login(r.token,r.user),X(!1),O(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),re=function(){var t=Object(N.a)(k.a.mark((function t(c){var s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return X(!0),t.next=3,n("/api/posts/delete/post/".concat(c),"DELETE",null,{Authorization:"Bearer ".concat(e.token)});case 3:return t.next=5,n("/api/posts/get/myposts","GET",null,{Authorization:"Bearer ".concat(e.token)});case 5:s=t.sent,Q(s.posts).then((function(e){return L(e)})),X(!1),j(!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsx)(c.Fragment,{children:B?Object(c.jsxs)("div",{className:"profile-page",children:[Object(c.jsxs)("div",{className:"profile__info",children:[Object(c.jsx)("div",{className:"avatar",children:Object(c.jsx)("img",{style:J,src:e.user.profileImg,alt:""})}),Object(c.jsxs)("div",{className:"info",children:[Object(c.jsxs)("div",{className:"name-settings",children:[Object(c.jsx)("h1",{children:e.user.displayName}),Object(c.jsxs)("div",{children:[Object(c.jsx)("i",{onClick:function(){return O(!0)},className:"material-icons",children:"settings"}),Object(c.jsx)("i",{onClick:function(){return i(!0)},className:"material-icons",children:"add_to_photos"})]})]}),Object(c.jsxs)("div",{className:"attributes",children:[Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:B.length})," posts"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:F.followers.length})," followers"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:F.following.length})," following"]})]})]})]}),Object(c.jsxs)("div",{className:"mobile-attributes",children:[Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:B.length})," posts"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:F.followers.length})," followers"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:F.following.length})," following"]})]}),Object(c.jsx)("div",{className:"profile__gallery",children:B.map((function(e){return Object(c.jsx)("div",{onClick:function(){ne(e),j(!0)},children:Object(c.jsx)("div",{children:Object(c.jsx)("img",{src:e.picture,alt:"",style:e.params})})},e._id)}))}),h&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{onClick:function(){return O(!1)},className:"modal-window__close"}),Object(c.jsxs)("div",{className:"modal-window",children:[V&&Object(c.jsx)(P,{}),Object(c.jsx)("i",{onClick:function(){return O(!1)},className:"material-icons close-btn",children:"clear"}),Object(c.jsxs)("div",{className:"inner",children:[Object(c.jsx)("h1",{children:"Account settings"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:"New profile image"}),Object(c.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/bmp",onChange:function(e){return D(e.target.files[0])},required:!0})]}),Object(c.jsx)("button",{onClick:se,children:"Submit"})]})]})]}),a&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{onClick:function(){return i(!1)},className:"modal-window__close"}),Object(c.jsxs)("div",{className:"modal-window",children:[V&&Object(c.jsx)(P,{}),Object(c.jsx)("i",{onClick:function(){return i(!1)},className:"material-icons close-btn",children:"clear"}),Object(c.jsxs)("div",{className:"inner",children:[Object(c.jsx)("h1",{children:"New Post"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:"Post image"}),Object(c.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/bmp",onChange:function(e){return E(e.target.files[0])},required:!0}),Object(c.jsx)("span",{children:"Your comment"}),Object(c.jsx)("input",{type:"text",placeholder:"Enter...",value:x,onChange:function(e){return g(e.target.value)},required:!0})]}),Object(c.jsx)("button",{onClick:ce,children:"Submit"})]})]})]}),te&&u&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{onClick:function(){return j(!1)},className:"modal-window__close"}),Object(c.jsxs)("div",{className:"modal-window",children:[V&&Object(c.jsx)(P,{}),Object(c.jsx)("i",{onClick:function(){return re(te._id)},className:"material-icons delete-btn",children:"delete"}),Object(c.jsx)("i",{onClick:function(){return j(!1)},className:"material-icons close-btn",children:"clear"}),Object(c.jsx)($,{post:te})]})]})]}):Object(c.jsx)(P,{})})})),X=Object(y.b)((function(e){return{dialogs:e.dialogsPage.dialogs,token:e.auth.token,user:e.auth.user}}),(function(e){return{setDialogs:function(t){e(o(t))},setMessages:function(t){e(i(t))},setChat:function(t){e(l(t))},setIsDialogSelected:function(t){e(u(t))}}}))((function(e){Object(v.f)();var t=_(),n=(t.error,t.request),s=(t.clearError,Object(m.useState)(null)),r=Object(S.a)(s,2),a=r[0],i=r[1],o=Object(m.useState)(null),l=Object(S.a)(o,2),u=l[0],j=l[1],d=Object(m.useState)(null),b=Object(S.a)(d,2),h=b[0],O=b[1],p=Object(v.g)().userId,f=Object(m.useState)(!1),x=Object(S.a)(f,2),g=x[0],w=x[1],y=Object(m.useState)(null),E=Object(S.a)(y,2),C=E[0],I=E[1];Object(m.useEffect)(Object(N.a)(k.a.mark((function t(){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/api/users/get/user/".concat(p),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 2:c=t.sent,Q(c.posts).then((function(t){i({posts:t,user:c.user}),j(c.user.followers.includes(e.user._id))}));case 4:case"end":return t.stop()}}),t)}))),[]),Object(m.useEffect)((function(){a&&Q(a.user.profileImg).then((function(e){O(e)}))}),[a]);var T=function(){var t=Object(N.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/api/users/put/follow","PUT",{followId:p},{Authorization:"Bearer ".concat(e.token)});case 2:i((function(e){return e.user.followers.push(""),e})),j(!0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=Object(N.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/api/users/put/unfollow","PUT",{unfollowId:p},{Authorization:"Bearer ".concat(e.token)});case 2:i((function(e){return e.user.followers.pop(),e})),j(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.jsx)(c.Fragment,{children:a?Object(c.jsxs)("div",{className:"profile-page",children:[Object(c.jsxs)("div",{className:"profile__info",children:[Object(c.jsx)("div",{className:"avatar",children:Object(c.jsx)("img",{style:h,src:a.user.profileImg,alt:""})}),Object(c.jsxs)("div",{className:"info",children:[Object(c.jsxs)("div",{className:"name-settings",children:[Object(c.jsx)("h1",{children:a.user.displayName}),Object(c.jsxs)("div",{className:"btn-wrapper",children:[u?Object(c.jsx)("button",{onClick:D,children:"Unfollow"}):Object(c.jsx)("button",{onClick:T,children:"Follow"}),Object(c.jsxs)("div",{className:"messages__footer",children:[Object(c.jsx)("input",{type:"text",placeholder:"Enter your message"}),Object(c.jsx)("button",{children:Object(c.jsx)("i",{className:"material-icons",style:{fontSize:"35px",cursor:"pointer",width:"35px"},children:"send"})})]})]})]}),Object(c.jsxs)("div",{className:"attributes",children:[Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:a.posts.length})," posts"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:a.user.followers.length})," followers"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:a.user.following.length})," following"]})]})]})]}),Object(c.jsxs)("div",{className:"mobile-attributes",children:[Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:a.posts.length})," posts"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:a.user.followers.length})," followers"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:a.user.following.length})," following"]})]}),Object(c.jsx)("div",{className:"profile__gallery",children:a.posts.map((function(e){return Object(c.jsx)("div",{onClick:function(){I(e),w(!0)},children:Object(c.jsx)("div",{children:Object(c.jsx)("img",{src:e.picture,alt:"",style:e.params})})},e._id)}))}),C&&g&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{onClick:function(){return w(!1)},className:"modal-window__close"}),Object(c.jsxs)("div",{className:"modal-window",children:[Object(c.jsx)("i",{onClick:function(){return w(!1)},className:"material-icons close-btn",children:"clear"}),Object(c.jsx)($,{post:C})]})]})]}):Object(c.jsx)(P,{})})})),Z=(n(75),Object(y.b)((function(e){return{token:e.auth.token,user:e.auth.user}}))((function(e){var t=_(),n=(t.error,t.request),s=(t.clearError,Object(m.useState)("")),r=Object(S.a)(s,2),a=r[0],i=r[1],o=Object(m.useState)(!0),l=Object(S.a)(o,2),u=l[0],j=l[1],d=Object(m.useState)([]),b=Object(S.a)(d,2),h=b[0],O=b[1],p=Object(m.useState)([]),f=Object(S.a)(p,2),x=f[0],v=f[1];return Object(m.useEffect)(Object(N.a)(k.a.mark((function t(){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,j(!0),t.next=4,n("/api/users/get/users","GET",null,{Authorization:"Bearer ".concat(e.token)});case 4:c=t.sent,v(c),j(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])}))),[]),Object(m.useEffect)(Object(N.a)(k.a.mark((function t(){var c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=15;break}return t.prev=1,j(!0),t.next=5,n("/api/users/post/users-search","POST",{query:a},{Authorization:"Bearer ".concat(e.token)});case 5:c=t.sent,O(c),j(!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:t.next=16;break;case 15:O([]);case 16:case"end":return t.stop()}}),t,null,[[1,10]])}))),[a]),Object(c.jsxs)("div",{className:"users-page",children:[Object(c.jsxs)("div",{className:"search-user",children:[Object(c.jsx)("i",{className:"material-icons",style:{position:"absolute",top:"50%",transform:"translateY(-50%)"},children:"search"}),Object(c.jsx)("input",{type:"text",placeholder:"Search...",className:"search-input",value:a,onChange:function(e){return i(e.target.value)}})]}),0!==h.length?Object(c.jsx)("div",{className:"dropdown-content",children:h.map((function(t){return Object(c.jsx)(g.b,{to:e.user._id!==t._id?"/profile/"+t._id:"/profile",onClick:function(){return i("")},children:Object(c.jsxs)("div",{children:[Object(c.jsx)(E.a,{src:t.profileImg}),Object(c.jsx)("p",{children:t.displayName})]})},t._id)}))}):Object(c.jsx)("div",{className:"dropdown-content",children:x.map((function(t){return Object(c.jsx)(g.b,{to:e.user._id!==t._id?"/profile/"+t._id:"/profile",onClick:function(){return i("")},children:Object(c.jsxs)("div",{children:[Object(c.jsx)(E.a,{src:t.profileImg}),Object(c.jsx)("p",{children:t.displayName})]})},t._id)}))}),u&&Object(c.jsx)(P,{})]})}))),ee=(n(76),n(77),Object(y.b)((function(e){return{token:e.auth.token}}))((function(e){var t=Object(m.useState)([]),n=Object(S.a)(t,2),s=n[0],r=n[1],a=Object(m.useState)(!0),i=Object(S.a)(a,2),o=i[0],l=i[1],u=_(),j=(u.error,u.request);u.clearError;return Object(m.useEffect)(Object(N.a)(k.a.mark((function t(){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j("/api/posts/get/posts","GET",null,{Authorization:"Bearer ".concat(e.token)});case 2:n=t.sent,r(n.posts),l(!1);case 5:case"end":return t.stop()}}),t)}))),[]),Object(c.jsx)(c.Fragment,{children:o?Object(c.jsx)(P,{}):Object(c.jsx)("div",{className:"home-page",children:Object(c.jsx)("div",{className:"home-page__inner",children:s.map((function(e){return Object(c.jsx)($,{post:e},e._id)}))})})})}))),te=n(32),ne=(n(78),Object(y.b)((function(e){return{token:e.auth.token}}),(function(e){return{login:function(t,n){e(b(t,n))}}}))((function(e){var t=e.login,n=_(),s=(n.error,n.request),a=(n.clearError,Object(m.useState)(!1)),i=Object(S.a)(a,2),o=i[0],l=i[1],u=Object(m.useState)({email:"",displayName:"",password:""}),j=Object(S.a)(u,2),d=j[0],b=j[1],h=Object(m.useState)(!1),O=Object(S.a)(h,2),p=O[0],f=O[1];Object(m.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("storageName"));e&&e.token&&t(e.token,e.user)}),[t]);var x=function(e){b(Object(r.a)(Object(r.a)({},d),{},Object(te.a)({},e.target.name,e.target.value)))},g=function(){var t=Object(N.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l(!0),t.next=4,s("/api/auth/register","POST",Object(r.a)({},d),{Authorization:"Bearer ".concat(e.token)});case 4:l(!1),w(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0),l(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),v=function(){var n=Object(N.a)(k.a.mark((function n(){var c;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,l(!0),n.next=4,s("/api/auth/login","POST",Object(r.a)({},d),{Authorization:"Bearer ".concat(e.token)});case 4:c=n.sent,t(c.token,c.user),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),alert(n.t0.message),l(!1);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}(),w=function(){f(!p)};return Object(c.jsx)(c.Fragment,{children:o?Object(c.jsx)(P,{}):Object(c.jsxs)("div",{className:"split-screen",children:[Object(c.jsx)("div",{className:"left",children:Object(c.jsxs)("section",{className:"copy",children:[Object(c.jsx)("h1",{children:"Kalina"}),Object(c.jsx)("p",{children:"Text for the beauty."})]})}),Object(c.jsx)("div",{className:"right",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("section",{className:"copy",children:[Object(c.jsxs)("h2",{children:["Sign ",p?"up":"in"]}),Object(c.jsx)("div",{className:"login-container",children:p?Object(c.jsxs)("p",{children:["Already have an account? ",Object(c.jsx)("a",{onClick:w,children:Object(c.jsx)("strong",{children:"Sign in!"})})]}):Object(c.jsxs)("p",{children:["Don't have an account? ",Object(c.jsx)("a",{onClick:w,children:Object(c.jsx)("strong",{children:"Sign up!"})})]})})]}),p&&Object(c.jsxs)("div",{className:"input-container name",children:[Object(c.jsx)("label",{htmlFor:"displayName",children:"Nickname"}),Object(c.jsx)("input",{name:"displayName",id:"displayName",type:"text",value:d.displayName,onChange:x,required:!0,placeholder:"From 4 to 12 characters",minLength:"4",maxLength:"12"})]}),Object(c.jsxs)("div",{className:"input-container email",children:[Object(c.jsx)("label",{htmlFor:"email",children:"Email"}),Object(c.jsx)("input",{name:"email",id:"email",type:"email",value:d.email,onChange:x,required:!0})]}),Object(c.jsxs)("div",{className:"input-container password",children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{name:"password",id:"password",type:"password",value:d.password,onChange:x,placeholder:"At least 6 characters!",required:!0,minLength:"6"}),Object(c.jsx)("i",{className:"far fa-eye-slash"})]}),p?Object(c.jsx)("button",{className:"signup-btn",type:"submit",onClick:g,children:"Sign up"}):Object(c.jsx)("button",{className:"signup-btn",type:"submit",onClick:v,children:"Sign in"}),Object(c.jsx)("section",{className:"copy legal",children:Object(c.jsx)("p",{children:Object(c.jsxs)("span",{className:"small",children:["By continuing, you agree to accept our ",Object(c.jsx)("br",{}),Object(c.jsx)("a",{children:"Privacy Policy"})," & ",Object(c.jsx)("a",{children:"Terms of Service"}),"."]})})})]})})]})})}))),ce=Object(y.b)((function(e){return{token:e.auth.token}}),(function(e){return{login:function(t,n){e(b(t,n))}}}))((function(e){var t=JSON.parse(sessionStorage.getItem("storageName")),n=Object(m.useRef)(null),s=!!e.token,r=Object(c.jsxs)(v.c,{children:[Object(c.jsx)(v.a,{path:"/dialogs",component:K}),Object(c.jsx)(v.a,{exact:!0,path:"/profile",render:function(){return Object(c.jsx)(V,{})}}),Object(c.jsx)(v.a,{exact:!0,path:"/profile/:userId",render:function(){return Object(c.jsx)(X,{})}}),Object(c.jsx)(v.a,{exact:!0,path:"/users",render:function(){return Object(c.jsx)(Z,{})}}),Object(c.jsx)(v.a,{exact:!0,path:"/",component:ee})]});function a(){try{n.current.style.height=document.body.clientHeight-(s?40:0)+"px"}catch(e){}}return t&&t.token&&e.login(t.token,t.user),Object(m.useEffect)((function(){return a(),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}),[s]),Object(c.jsx)(g.a,{children:s?Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"main",children:[Object(c.jsx)(C,{}),Object(c.jsx)("div",{ref:n,className:"app",children:Object(c.jsx)("div",{className:"app-inner",children:r})})]})}):Object(c.jsx)(v.a,{path:"/",exact:!0,component:ne})})})),se=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(se,"px")),window.addEventListener("resize",(function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))})),x.a.render(Object(c.jsx)(y.a,{store:p,children:Object(c.jsx)(ce,{})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.a6bd1b28.chunk.js.map