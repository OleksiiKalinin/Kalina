(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{44:function(e,t,n){},63:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(26),a=n(8),r={dialogs:[],messages:[],chat:{},isDialogSelected:!1,isDialogsLoading:!0},i=function(e){return{type:"SET_MESSAGES",messages:e}},o=function(e){return{type:"SET_DIALOGS",dialogs:e}},l=function(e){return{type:"SET_CHAT",chat:e}},u=function(e){return{type:"SET_IS_DIALOG_SELECTED",isDialogSelected:e}},j=function(e){return{type:"SET_IS_DIALOGS_LOADING",isDialogsLoading:e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":return Object(a.a)({},e);case"SET_MESSAGES":return Object(a.a)(Object(a.a)({},e),{},{newMessageBody:"",messages:t.messages});case"SET_DIALOGS":return Object(a.a)(Object(a.a)({},e),{},{dialogs:t.dialogs});case"SET_CHAT":return Object(a.a)(Object(a.a)({},e),{},{chat:t.chat});case"SET_IS_DIALOG_SELECTED":return Object(a.a)(Object(a.a)({},e),{},{isDialogSelected:t.isDialogSelected});case"SET_IS_DIALOGS_LOADING":return Object(a.a)(Object(a.a)({},e),{},{isDialogsLoading:t.isDialogsLoading});default:return e}},b={token:null,user:{}},h=function(e,t){return{type:"LOGIN",jwtSecret:e,user:t}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return sessionStorage.setItem("storageName",JSON.stringify({token:t.jwtSecret,user:t.user})),Object(a.a)(Object(a.a)({},e),{},{token:t.jwtSecret,user:t.user});case"LOGOUT":return sessionStorage.removeItem("storageName"),Object(a.a)(Object(a.a)({},e),{},{token:null,user:{}});default:return e}},p=Object(s.b)({dialogsPage:d,auth:O}),f=Object(s.c)(p),m=n(1),x=n(19),g=n.n(x),v=n(11),w=n(9),k=n(3),N=n.n(k),S=n(5),y=n(4),_=n(7),E=function(){return{request:Object(m.useCallback)(function(){var e=Object(S.a)(N.a.mark((function e(t){var n,c,s,a,r,i=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"GET",c=i.length>2&&void 0!==i[2]?i[2]:null,s=i.length>3&&void 0!==i[3]?i[3]:{},e.prev=3,c&&(c=JSON.stringify(c),s["Content-Type"]="application/json"),e.next=7,fetch("https://kalinaserver.herokuapp.com".concat(t),{method:n,body:c,headers:s});case 7:return a=e.sent,e.next=10,a.json();case 10:if(r=e.sent,a.ok){e.next=13;break}throw new Error(r.message||"Something goes wrong");case 13:return e.abrupt("return",r);case 16:throw e.prev=16,e.t0=e.catch(3),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),[])}},I=n(96),C=(n(63),Object(_.b)((function(e){return{token:e.auth.token,user:e.auth.user}}),(function(e){return{logout:function(){e({type:"LOGOUT"})}}}))((function(e){var t=e.logout,n=Object(w.f)(),s=E().request,a=Object(m.useState)(""),r=Object(y.a)(a,2),i=r[0],o=r[1],l=Object(m.useState)([]),u=Object(y.a)(l,2),j=u[0],d=u[1];return document.onmouseup=function(e){var t=document.querySelector(".search-user");e.path.includes(t)||(d([]),o(""))},Object(m.useEffect)(Object(S.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=13;break}return t.prev=1,t.next=4,s("/api/users/post/users-search","POST",{query:i},{Authorization:"Bearer ".concat(e.token)});case 4:n=t.sent,d(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:t.next=14;break;case 13:d([]);case 14:case"end":return t.stop()}}),t,null,[[1,8]])}))),[i]),Object(c.jsx)("div",{className:"header-wrapper",children:Object(c.jsxs)("div",{className:"header",children:[Object(c.jsx)("span",{className:"label",children:Object(c.jsx)(v.b,{to:"/",children:Object(c.jsx)("big",{children:"Kalina"})})}),Object(c.jsxs)("div",{className:"search-user",children:[Object(c.jsx)("i",{className:"material-icons",style:{position:"absolute",top:"50%",transform:"translateY(-50%)"},children:"search"}),Object(c.jsx)("input",{type:"text",placeholder:"Search users...",id:"search-input",value:i,onChange:function(e){return o(e.target.value)}}),0!==j.length&&Object(c.jsx)("div",{className:"dropdown-content",children:j.map((function(t){return Object(c.jsx)(v.b,{to:e.user._id!==t._id?"/profile/"+t._id:"/profile",onClick:function(){return o("")},children:Object(c.jsxs)("div",{children:[Object(c.jsx)(I.a,{src:t.profileImg}),Object(c.jsx)("p",{children:t.displayName})]})},t._id)}))})]}),Object(c.jsxs)("div",{className:"navigation",children:[Object(c.jsx)(v.b,{to:"/",children:Object(c.jsx)("i",{className:"material-icons",children:"home"})}),Object(c.jsx)(v.b,{to:"/profile",children:Object(c.jsx)("i",{className:"material-icons",children:"person"})}),Object(c.jsx)(v.b,{to:"/dialogs",children:Object(c.jsx)("i",{className:"material-icons",children:"message"})}),Object(c.jsx)(v.b,{to:"/users",children:Object(c.jsx)("i",{className:"material-icons",children:"people"})}),Object(c.jsx)(v.b,{to:"/",onClick:function(e){e.preventDefault(),t(),n.push("/")},children:Object(c.jsx)("i",{className:"material-icons",children:"exit_to_app"})})]})]})})}))),D=(n(65),n(66),n(22)),T=n.n(D),A=function(e){var t=new Date(e),n=new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().split("T");return{date:n[0],time:n[1].replace(/:\d+\..*$/g,"")}},z=new T.a("b634efb073fba40fbf3a",{cluster:"eu"}),L=Object(_.b)((function(e){return{dialogs:e.dialogsPage.dialogs,isDialogsLoading:e.dialogsPage.isDialogsLoading,token:e.auth.token,user:e.auth.user}}),(function(e){return{setDialogs:function(t){e(o(t))},setMessages:function(t){e(i(t))},setChat:function(t){e(l(t))},setIsDialogSelected:function(t){e(u(t))},setIsDialogsLoading:function(t){e(j(t))}}}))((function(e){var t=e.dialog,n=e.index,s=E().request,a=Object(m.useState)({}),r=Object(y.a)(a,2),i=r[0],o=r[1],l=Object(m.useState)({}),u=Object(y.a)(l,2),j=u[0],d=u[1],b=Object(m.useState)(!0),h=Object(y.a)(b,2),O=h[0],p=h[1];Object(m.useEffect)((function(){return e.extra.forEach((function(t){t.id!==e.user._id&&d(t)})),function(){return e.setIsDialogSelected(!1)}}),[]);var f=function(){var c=Object(S.a)(N.a.mark((function c(){var a;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,s("/api/chats/get/lastMessage?id=".concat(t.id),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:a=c.sent,o(a),p(!1),n&&e.setIsDialogsLoading(!1),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(0),console.log(c.t0);case 12:case"end":return c.stop()}}),c,null,[[0,9]])})));return function(){return c.apply(this,arguments)}}();Object(m.useEffect)((function(){f();var e=z.subscribe("messages");return e.bind("newMessage",(function(){f()})),function(){e.unbind_all(),e.unsubscribe()}}),[t.id]);var x=function(){var n=Object(S.a)(N.a.mark((function n(){var c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s("/api/chats/get/conversation?id=".concat(t.id),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:c=n.sent,e.setMessages(c.conversation),e.setChat({chatName:j.displayName||c.chatName,chatImg:j.profileImg||c.chatImg,participantId:j.id,chatId:t.id}),e.setIsDialogSelected(!0),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();return Object(c.jsx)(c.Fragment,{children:!O&&Object(c.jsx)("div",{onClick:x,className:"dialogItem",children:Object(c.jsxs)("div",{className:"dialogItem__info",children:[Object(c.jsx)("div",{className:"dialogItem__info-avatar",children:Object(c.jsx)(I.a,{src:j.profileImg})}),Object(c.jsxs)("div",{className:"dialogItem__info-main",children:[Object(c.jsx)("div",{children:Object(c.jsx)("h1",{children:t.name||j.displayName})}),Object(c.jsxs)("span",{className:"dialogItem__info-message",children:[i.owner.displayName,": ",i.message]})]}),Object(c.jsxs)("div",{className:"timeStamp",children:[Object(c.jsx)("div",{children:A(parseInt(i.timestamp)).date}),Object(c.jsx)("div",{children:A(parseInt(i.timestamp)).time})]})]})})})})),P=(n(67),function(){return Object(c.jsx)("div",{className:"wrapper",children:Object(c.jsxs)("div",{className:"lds-ellipsis",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})})}),B=(n(68),new T.a("b634efb073fba40fbf3a",{cluster:"eu"})),G=Object(_.b)((function(e){return{dialogs:e.dialogsPage.dialogs,isDialogSelected:e.dialogsPage.isDialogSelected,isDialogsLoading:e.dialogsPage.isDialogsLoading,user:e.auth.user,token:e.auth.token}}),(function(e){return{setDialogs:function(t){e(o(t))},setIsDialogsLoading:function(t){e(j(t))}}}))((function(e){var t=E().request,n=Object(m.useState)(""),s=Object(y.a)(n,2),a=s[0],r=s[1],i=Object(m.useState)(!0),o=Object(y.a)(i,2),l=o[0],u=o[1],j=Object(m.useRef)(null),d=Object(m.useRef)(null),b=Object(m.useRef)(null),h=function(){var n=Object(S.a)(N.a.mark((function n(){var c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t("/api/chats/get/conversations","GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:c=n.sent,e.setDialogs(c),u(!1),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(m.useEffect)((function(){e.isDialogSelected?j.current.classList.remove("show"):j.current.classList.add("show")}),[e.isDialogSelected]),Object(m.useEffect)((function(){h();var t=B.subscribe("chats");return t.bind("newChat",(function(){h()})),function(){t.unbind_all(),t.unsubscribe(),e.setIsDialogsLoading(!0)}}),[]),Object(c.jsxs)("div",{ref:j,className:"dialogs show",children:[Object(c.jsx)("div",{ref:d,className:"dialogs__header",children:Object(c.jsxs)("div",{className:"search-chats",children:[Object(c.jsx)("i",{className:"material-icons",style:{position:"absolute",top:"50%",transform:"translateY(-50%)",paddingLeft:"5px"},children:"search"}),Object(c.jsx)("input",{type:"text",placeholder:"Search the chat or start new",id:"search-chats-input",value:a,onChange:function(e){return r(e.target.value)}}),Object(c.jsx)("i",{className:"material-icons",style:{position:"absolute",top:"50%",right:"0",transform:"translateY(-50%)",paddingRight:"5px",opacity:".5"},children:"add"})]})}),Object(c.jsxs)("div",{ref:b,className:"dialogs__items",children:[e.isDialogsLoading&&Object(c.jsx)(P,{}),!l&&e.dialogs.map((function(t,n){var s=null;return n+1===e.dialogs.length&&(s=n),Object(c.jsx)(L,{index:s,dialog:t,extra:t.extra},t.id)}))]})]})})),q=n(95),F=n(93),M=n(94),U=(n(69),function(e){var t=A(parseInt(e.message.timestamp));return Object(c.jsxs)("div",{className:"messages__item  ".concat(e.message.owner._id===e.userId&&"messages__receiver"),children:[Object(c.jsx)("span",{className:"message__name",children:e.message.owner.displayName}),Object(c.jsx)("div",{className:"message",children:e.message.message}),Object(c.jsx)("span",{className:"message__timestamp",children:t.date+" "+t.time})]})}),H=n(37),J=n.n(H),R=(n(70),function(){return Object(c.jsx)("div",{className:"loadingio-spinner-spinner-owwc8nyxhkf",children:Object(c.jsxs)("div",{className:"ldio-wt50jy4ikwl",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})})}),K=(n(71),Object(_.b)((function(e){return{messages:e.dialogsPage.messages,chat:e.dialogsPage.chat,user:e.auth.user,token:e.auth.token}}),(function(e){return{sendMessage:function(){e({type:"SEND_MESSAGE"})},setMessages:function(t){e(i(t))},setChat:function(t){e(l(t))},setIsDialogSelected:function(t){e(u(t))}}}))((function(e){var t=E().request,n=Object(m.useState)(""),s=Object(y.a)(n,2),a=s[0],r=s[1],i=Object(m.useState)(!1),o=Object(y.a)(i,2),l=o[0],u=o[1],j=Object(m.useState)(!1),d=Object(y.a)(j,2),b=d[0],h=d[1],O=Object(m.useState)(null),p=Object(y.a)(O,2),f=p[0],x=p[1],g=Object(m.useRef)(null);Object(m.useEffect)((function(){return document.onmouseup=function(e){g.current.focus();var t=document.querySelector(".emojiDiv");e.path.includes(t)||u(!1)},function(){return document.onmouseup=null}}),[l]);var w=function(){var n=Object(S.a)(N.a.mark((function n(){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(""),u(!1),h(!0),n.prev=3,n.next=6,t("/api/chats/new/message?id=".concat(e.chat.chatId),"POST",{message:a,timestamp:Date.now()},{Authorization:"Bearer ".concat(e.token)});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[3,8]])})));return function(){return n.apply(this,arguments)}}(),k=function(){try{var e=document.querySelector(".messages__body");e.scrollTop=e.scrollHeight}catch(t){}};return Object(m.useEffect)((function(){return window.addEventListener("resize",(function(){return k()})),g.current.focus(),function(){return window.removeEventListener("resize",(function(){return k()}))}}),[]),Object(m.useEffect)((function(){var n=new T.a("b634efb073fba40fbf3a",{cluster:"eu"}).subscribe("messages");return n.bind("newMessage",Object(S.a)(N.a.mark((function n(){var c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t("/api/chats/get/conversation?id=".concat(e.chat.chatId),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:c=n.sent,e.setMessages(c.conversation),k(),h(!1),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})))),k(),function(){n.unbind_all(),n.unsubscribe()}}),[e.chat.chatId]),Object(m.useEffect)((function(){f&&r((function(e){return e+f.emoji}))}),[f]),Object(c.jsxs)("div",{className:"messages",children:[Object(c.jsxs)("div",{className:"messages__header",children:[Object(c.jsx)("div",{className:"btnBack",style:{height:"50px",width:"30px"},children:Object(c.jsx)("i",{onClick:function(){return e.setIsDialogSelected(!1)},className:"material-icons",style:{fontSize:"50px",position:"absolute",left:"-5px"},children:"chevron_left"})}),Object(c.jsx)("div",{className:"messages__headerInfo",children:Object(c.jsxs)(v.b,{to:"/profile/"+e.chat.participantId,children:[Object(c.jsx)(I.a,{src:e.chat.chatImg}),Object(c.jsx)("div",{children:Object(c.jsx)("p",{children:e.chat.chatName})})]})}),Object(c.jsxs)("div",{className:"messages__headerRight",children:[Object(c.jsx)(q.a,{children:Object(c.jsx)(F.a,{})}),Object(c.jsx)(q.a,{children:Object(c.jsx)(M.a,{})})]})]}),Object(c.jsx)("div",{className:"messages__body",children:e.messages.map((function(t){return Object(c.jsx)(U,{userId:e.user._id,message:t},t._id)}))}),Object(c.jsxs)("div",{className:"messages__footer",children:[Object(c.jsx)("i",{onClick:function(){return u(!l)},className:"material-icons emojicon",style:{fontSize:"35px",cursor:"pointer",width:"35px"},children:"insert_emoticon"}),Object(c.jsx)("input",{ref:g,value:a,onChange:function(e){r(e.target.value),u(!1)},onKeyUp:function(e){return!(13!==e.keyCode||!a)&&w()},type:"text",placeholder:"Enter your message"}),Object(c.jsxs)("button",{onClick:w,disabled:!a,children:[Object(c.jsx)("i",{className:"material-icons",style:{fontSize:"35px",cursor:"pointer",width:"35px"},children:"send"}),b&&Object(c.jsx)(R,{})]})]}),l&&Object(c.jsx)("div",{className:"emojiDiv",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:"1000"},children:Object(c.jsx)(J.a,{disableAutoFocus:!0,onEmojiClick:function(e,t){x(t)}})})]})}))),Y=Object(_.b)((function(e){return{isDialogSelected:e.dialogsPage.isDialogSelected}}))((function(e){return Object(c.jsxs)("div",{className:"dialogs-page",children:[Object(c.jsx)(G,{}),e.isDialogSelected?Object(c.jsx)(K,{}):Object(c.jsx)("div",{className:"chooseChat",children:"Choose a chat"})]})})),W=n(49),$=Object(_.b)((function(e){return{token:e.auth.token,user:e.auth.user}}))((function(e){var t=e.post,n=e.token,s=e.user,a=E().request,r=Object(m.useState)(t.likes.includes(s._id)),i=Object(y.a)(r,2),o=i[0],l=i[1],u=Object(m.useState)(!1),j=Object(y.a)(u,2),d=j[0],b=j[1],h=Object(m.useState)(t.likes.length),O=Object(y.a)(h,2),p=O[0],f=O[1],x=Object(m.useState)(t.comments),g=Object(y.a)(x,2),w=g[0],k=g[1],_=Object(m.useState)(t.comments.length),C=Object(y.a)(_,2),D=C[0],T=C[1],z=Object(m.useState)(!1),L=Object(y.a)(z,2),P=L[0],B=L[1],G=Object(m.useState)(""),q=Object(y.a)(G,2),F=q[0],M=q[1],U=Object(m.useRef)(null),H=Object(m.useState)(null),R=Object(y.a)(H,2),K=R[0],Y=R[1],W=Object(m.useState)(!1),$=Object(y.a)(W,2),Q=$[0],V=$[1],X=A(t.createdAt);Object(m.useEffect)((function(){return document.onmouseup=function(e){var t=document.querySelector(".emojiDiv");e.path.includes(t)||V(!1)},function(){return document.onmouseup=null}}),[Q]),Object(m.useEffect)(Object(S.a)(N.a.mark((function e(){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=5;break}return e.next=3,a("/api/posts/put/".concat(o?"like":"unlike"),"PUT",{postId:t._id},{Authorization:"Bearer ".concat(n)});case 3:c=e.sent,f(c.likes.length);case 5:case"end":return e.stop()}}),e)}))),[o]);var Z=function(){var e=Object(S.a)(N.a.mark((function e(){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("/api/posts/put/comment","PUT",{postId:t._id,text:F},{Authorization:"Bearer ".concat(n)});case 2:c=e.sent,k(c.comments),M(""),T(c.comments.length),V(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.useEffect)((function(){U.current.classList.toggle("show-comments")}),[P]),Object(m.useEffect)((function(){K&&M((function(e){return e+K.emoji}))}),[K]),Object(c.jsx)("div",{className:"element",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("div",{className:"card-header",children:Object(c.jsxs)(v.b,{to:s._id!==t.owner._id?"/profile/"+t.owner._id:"/profile",children:[Object(c.jsx)(I.a,{src:t.owner.profileImg}),Object(c.jsx)("p",{children:t.owner.displayName})]})}),Object(c.jsx)("div",{className:"card-image",children:Object(c.jsx)("img",{src:t.picture,alt:""})}),Object(c.jsxs)("div",{className:"card-content",children:[Object(c.jsx)("i",{onClick:function(){b(!0),l(!o)},className:"material-icons",style:{fontSize:"35px",cursor:"pointer",color:"red"},children:o?"favorite":"favorite_border"}),Object(c.jsx)("small",{children:Object(c.jsxs)("strong",{children:["Likes: ",p]})}),Object(c.jsxs)("p",{children:[Object(c.jsx)("strong",{children:t.owner.displayName})," ",t.body]}),Object(c.jsx)("div",{children:Object(c.jsxs)("strong",{className:"show-comments-btn",onClick:function(){return B(!P)},children:[P?"Hide":"Show"," all comments (",D,")"]})}),Object(c.jsx)("div",{className:"comments show-comments",ref:U,children:w.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:e.owner.displayName})," ",e.text]},e._id)}))}),Object(c.jsx)("div",{className:"timestamp",children:X.date+" "+X.time})]}),Object(c.jsxs)("div",{className:"new-comment",children:[Q&&Object(c.jsx)("div",{className:"emojiDiv",style:{position:"absolute",bottom:"20px",left:"50%",transform:"translate(-50%, -32px)",zIndex:"1000"},children:Object(c.jsx)(J.a,{disableAutoFocus:!0,onEmojiClick:function(e,t){return Y(t)}})}),Object(c.jsx)("i",{onClick:function(){return V(!Q)},className:"material-icons emojicon",style:{fontSize:"35px",cursor:"pointer",width:"35px"},children:"insert_emoticon"}),Object(c.jsx)("input",{value:F,onChange:function(e){M(e.target.value),V(!1)},onKeyUp:function(e){return!(13!==e.keyCode||!F)&&Z()},type:"text",placeholder:"Add a comment..."}),Object(c.jsx)("button",{onClick:Z,disabled:!F,children:"Publish"})]})]})})}));var Q=function(e){return new Promise((function(t,n){if("string"===typeof e)a(e).then((function(e){return t(e)}));else{0===e.length&&t(e);for(var c=function(n){a(e[n].picture).then((function(c){e[n].params=c,n+1===e.length&&t(e)}))},s=0;s<e.length;++s)c(s)}function a(e){var t=document.createElement("img");return t.src=e,new Promise((function(e,n){t.onload=function(){e(t.width>=t.height?{height:"100%",minWidth:"100%",width:"none",minHeight:"none"}:{height:"none",minWidth:"none",width:"100%",minHeight:"100%"})}}))}}))},V=(n(44),Object(_.b)((function(e){return{token:e.auth.token,user:e.auth.user}}),(function(e){return{login:function(t,n){e(h(t,n))}}}))((function(e){var t=E().request,n=Object(m.useState)(!1),s=Object(y.a)(n,2),a=s[0],r=s[1],i=Object(m.useState)(!1),o=Object(y.a)(i,2),l=o[0],u=o[1],j=Object(m.useState)(!1),d=Object(y.a)(j,2),b=d[0],h=d[1],O=Object(m.useState)(""),p=Object(y.a)(O,2),f=p[0],x=p[1],g=Object(m.useState)(""),v=Object(y.a)(g,2),w=v[0],k=v[1],_=Object(m.useState)(""),I=Object(y.a)(_,2),C=I[0],D=I[1],T=Object(m.useState)(null),A=Object(y.a)(T,2),z=A[0],L=A[1],B=Object(m.useState)(null),G=Object(y.a)(B,2),q=G[0],F=G[1],M=Object(m.useState)(null),U=Object(y.a)(M,2),H=U[0],J=U[1],R=Object(m.useState)(!1),K=Object(y.a)(R,2),Y=K[0],V=K[1],X=Object(m.useState)(null),Z=Object(y.a)(X,2),ee=Z[0],te=Z[1];Object(m.useEffect)(Object(S.a)(N.a.mark((function n(){var c,s;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t("/api/posts/get/myposts","GET",null,{Authorization:"Bearer ".concat(e.token)});case 2:return c=n.sent,n.next=5,t("/api/users/get/myfollowdata","GET",null,{Authorization:"Bearer ".concat(e.token)});case 5:s=n.sent,console.log(s),F(s),Q(c.posts).then((function(e){L(e)})),Q(e.user.profileImg).then((function(e){J(e)}));case 10:case"end":return n.stop()}}),n)}))),[]);var ne=function(){var n=Object(S.a)(N.a.mark((function n(){var c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return V(!0),(c=new FormData).append("file",w),c.append("upload_preset","kalina-why-not"),c.append("cloud_name","kalina-why-not"),n.next=7,fetch("https://api.cloudinary.com/v1_1/kalina-why-not/image/upload",{method:"POST",body:c}).then((function(e){return e.json()})).then(function(){var n=Object(S.a)(N.a.mark((function n(c){var s;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t("/api/posts/new/post","POST",{body:f,picture:c.url},{Authorization:"Bearer ".concat(e.token)});case 2:s=n.sent,Q([s]).then((function(e){L([e[0]].concat(Object(W.a)(z))),V(!1),r(!1)}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){V(!1),alert(e)}));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),ce=function(){var n=Object(S.a)(N.a.mark((function n(){var c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(V(!0),c=new FormData,C){n.next=6;break}return alert("Error: please, choose an image"),V(!1),n.abrupt("return");case 6:return c.append("file",C),c.append("upload_preset","kalina-why-not"),c.append("cloud_name","kalina-why-not"),n.next=11,fetch("https://api.cloudinary.com/v1_1/kalina-why-not/image/upload",{method:"POST",body:c}).then((function(e){return e.json()})).then(function(){var n=Object(S.a)(N.a.mark((function n(c){var s,a;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t("/api/users/put/profileImg","PUT",{picture:c.url},{Authorization:"Bearer ".concat(e.token)});case 2:s=n.sent,sessionStorage.setItem("storageName",JSON.stringify({token:e.token,user:s})),(a=JSON.parse(sessionStorage.getItem("storageName")))&&a.token&&e.login(a.token,a.user),V(!1),h(!1);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),se=function(){var n=Object(S.a)(N.a.mark((function n(c){var s;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return V(!0),n.next=3,t("/api/posts/delete/post/".concat(c),"DELETE",null,{Authorization:"Bearer ".concat(e.token)});case 3:return n.next=5,t("/api/posts/get/myposts","GET",null,{Authorization:"Bearer ".concat(e.token)});case 5:s=n.sent,Q(s.posts).then((function(e){return L(e)})),V(!1),u(!1);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(c.jsx)(c.Fragment,{children:z?Object(c.jsxs)("div",{className:"profile-page",children:[Object(c.jsxs)("div",{className:"profile__info",children:[Object(c.jsx)("div",{className:"avatar",children:Object(c.jsx)("img",{style:H,src:e.user.profileImg,alt:""})}),Object(c.jsxs)("div",{className:"info",children:[Object(c.jsxs)("div",{className:"name-settings",children:[Object(c.jsx)("h1",{children:e.user.displayName}),Object(c.jsxs)("div",{children:[Object(c.jsx)("i",{onClick:function(){return h(!0)},className:"material-icons",children:"settings"}),Object(c.jsx)("i",{onClick:function(){return r(!0)},className:"material-icons",children:"add_to_photos"})]})]}),Object(c.jsxs)("div",{className:"attributes",children:[Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:z.length})," posts"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:q.followers.length})," followers"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:q.following.length})," following"]})]})]})]}),Object(c.jsxs)("div",{className:"mobile-attributes",children:[Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:z.length})," posts"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:q.followers.length})," followers"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:q.following.length})," following"]})]}),Object(c.jsx)("div",{className:"profile__gallery",children:z.map((function(e){return Object(c.jsx)("div",{onClick:function(){te(e),u(!0)},children:Object(c.jsx)("div",{children:Object(c.jsx)("img",{src:e.picture,alt:"",style:e.params})})},e._id)}))}),b&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{onClick:function(){return h(!1)},className:"modal-window__close"}),Object(c.jsxs)("div",{className:"modal-window",children:[Y&&Object(c.jsx)(P,{}),Object(c.jsx)("i",{onClick:function(){return h(!1)},className:"material-icons close-btn",children:"clear"}),Object(c.jsxs)("div",{className:"inner",children:[Object(c.jsx)("h1",{children:"Account settings"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:"New profile image"}),Object(c.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/bmp",onChange:function(e){return D(e.target.files[0])},required:!0})]}),Object(c.jsx)("button",{onClick:ce,children:"Submit"})]})]})]}),a&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{onClick:function(){return r(!1)},className:"modal-window__close"}),Object(c.jsxs)("div",{className:"modal-window",children:[Y&&Object(c.jsx)(P,{}),Object(c.jsx)("i",{onClick:function(){return r(!1)},className:"material-icons close-btn",children:"clear"}),Object(c.jsxs)("div",{className:"inner",children:[Object(c.jsx)("h1",{children:"New Post"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:"Post image"}),Object(c.jsx)("input",{type:"file",accept:"image/jpeg,image/png,image/bmp",onChange:function(e){return k(e.target.files[0])},required:!0}),Object(c.jsx)("span",{children:"Your comment"}),Object(c.jsx)("input",{type:"text",placeholder:"Enter...",value:f,onChange:function(e){return x(e.target.value)},required:!0})]}),Object(c.jsx)("button",{onClick:ne,children:"Submit"})]})]})]}),ee&&l&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{onClick:function(){return u(!1)},className:"modal-window__close"}),Object(c.jsxs)("div",{className:"modal-window",children:[Y&&Object(c.jsx)(P,{}),Object(c.jsx)("i",{onClick:function(){return se(ee._id)},className:"material-icons delete-btn",children:"delete"}),Object(c.jsx)("i",{onClick:function(){return u(!1)},className:"material-icons close-btn",children:"clear"}),Object(c.jsx)($,{post:ee})]})]})]}):Object(c.jsx)(P,{})})}))),X=Object(_.b)((function(e){return{dialogs:e.dialogsPage.dialogs,token:e.auth.token,user:e.auth.user}}),(function(e){return{setDialogs:function(t){e(o(t))},setMessages:function(t){e(i(t))},setChat:function(t){e(l(t))},setIsDialogSelected:function(t){e(u(t))}}}))((function(e){var t=Object(w.f)(),n=E().request,s=Object(m.useState)(null),r=Object(y.a)(s,2),i=r[0],o=r[1],l=Object(m.useState)(null),u=Object(y.a)(l,2),j=u[0],d=u[1],b=Object(m.useState)(null),h=Object(y.a)(b,2),O=h[0],p=h[1],f=Object(w.g)().userId,x=Object(m.useState)(!1),g=Object(y.a)(x,2),v=g[0],k=g[1],_=Object(m.useState)(null),I=Object(y.a)(_,2),C=I[0],D=I[1],T=Object(m.useState)(""),A=Object(y.a)(T,2),z=A[0],L=A[1],B=Object(m.useState)(!1),G=Object(y.a)(B,2),q=G[0],F=G[1],M=Object(m.useState)(!1),U=Object(y.a)(M,2),H=U[0],J=U[1];Object(m.useEffect)(Object(S.a)(N.a.mark((function t(){var c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/api/users/get/user/".concat(f),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 2:c=t.sent,Q(c.posts).then((function(t){o({posts:t,user:c.user}),d(c.user.followers.includes(e.user._id))}));case 4:case"end":return t.stop()}}),t)}))),[]),Object(m.useEffect)((function(){return document.onmouseup=function(e){var t=document.querySelector(".new-message");e.path.includes(t)||F(!1)},function(){return document.onmouseup=null}}),[q]),Object(m.useEffect)((function(){i&&Q(i.user.profileImg).then((function(e){p(e)}))}),[i]);var K=function(){var t=Object(S.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/api/users/put/follow","PUT",{followId:f},{Authorization:"Bearer ".concat(e.token)});case 2:o((function(e){return e.user.followers.push(""),e})),d(!0);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Y=function(){var t=Object(S.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/api/users/put/unfollow","PUT",{unfollowId:f},{Authorization:"Bearer ".concat(e.token)});case 2:o((function(e){return e.user.followers.pop(),e})),d(!1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),W=function(){var c=Object(S.a)(N.a.mark((function c(){var s,r,i,o,l;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(c.prev=0,!z){c.next=31;break}return J(!0),L(""),s=null,r=null,i=null,c.next=9,n("/api/chats/get/conversations","GET",null,{Authorization:"Bearer ".concat(e.token)});case 9:if(c.sent.forEach((function(e){e.extra.forEach((function(t){t.id===f&&(s=e.id)}))})),!s){c.next=16;break}return c.next=14,n("/api/chats/new/message?id=".concat(s),"POST",{message:z,timestamp:Date.now()},{Authorization:"Bearer ".concat(e.token)});case 14:c.next=22;break;case 16:return c.next=18,n("/api/chats/new/conversation","POST",{chatName:i,other:f},{Authorization:"Bearer ".concat(e.token)});case 18:return o=c.sent,s=o._id,c.next=22,n("/api/chats/new/message?id=".concat(s),"POST",{message:z,timestamp:Date.now()},{Authorization:"Bearer ".concat(e.token)});case 22:return c.next=24,n("/api/chats/get/conversation?id=".concat(s),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 24:l=c.sent,e.setMessages(l.conversation),l.extra.forEach((function(t){t.id!==e.user._id&&(r=Object(a.a)({},t))})),e.setChat({chatName:r.displayName||l.chatName,chatImg:r.profileImg||l.chatImg,participantId:r.id,chatId:e.id}),e.setIsDialogSelected(!0),J(!1),t.push("/dialogs");case 31:c.next=36;break;case 33:c.prev=33,c.t0=c.catch(0),console.log(c.t0);case 36:case"end":return c.stop()}}),c,null,[[0,33]])})));return function(){return c.apply(this,arguments)}}();return Object(c.jsx)(c.Fragment,{children:i?Object(c.jsxs)("div",{className:"profile-page",children:[Object(c.jsxs)("div",{className:"profile__info",children:[Object(c.jsx)("div",{className:"avatar",children:Object(c.jsx)("img",{style:O,src:i.user.profileImg,alt:""})}),Object(c.jsxs)("div",{className:"info",children:[Object(c.jsxs)("div",{className:"name-settings",children:[Object(c.jsx)("h1",{children:i.user.displayName}),Object(c.jsxs)("div",{className:"btn-wrapper",children:[j?Object(c.jsx)("button",{onClick:Y,children:"Unfollow"}):Object(c.jsx)("button",{onClick:K,children:"Follow"}),Object(c.jsx)("button",{onClick:function(){return F(!q)},children:"Send message"}),q&&Object(c.jsxs)("div",{className:"new-message",children:[Object(c.jsx)("input",{value:z,onChange:function(e){return L(e.target.value)},onKeyUp:function(e){return!(13!==e.keyCode||!z)&&W()},type:"text",placeholder:"Enter your message"}),Object(c.jsxs)("button",{onClick:W,disabled:!z,children:[H&&Object(c.jsx)(R,{}),Object(c.jsx)("i",{className:"material-icons",style:{fontSize:"35px",cursor:"pointer",width:"35px"},children:"send"})]})]})]})]}),Object(c.jsxs)("div",{className:"attributes",children:[Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:i.posts.length})," posts"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:i.user.followers.length})," followers"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:i.user.following.length})," following"]})]})]})]}),Object(c.jsxs)("div",{className:"mobile-attributes",children:[Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:i.posts.length})," posts"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:i.user.followers.length})," followers"]}),Object(c.jsxs)("h3",{children:[Object(c.jsx)("strong",{children:i.user.following.length})," following"]})]}),Object(c.jsx)("div",{className:"profile__gallery",children:i.posts.map((function(e){return Object(c.jsx)("div",{onClick:function(){D(e),k(!0)},children:Object(c.jsx)("div",{children:Object(c.jsx)("img",{src:e.picture,alt:"",style:e.params})})},e._id)}))}),C&&v&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{onClick:function(){return k(!1)},className:"modal-window__close"}),Object(c.jsxs)("div",{className:"modal-window",children:[Object(c.jsx)("i",{onClick:function(){return k(!1)},className:"material-icons close-btn",children:"clear"}),Object(c.jsx)($,{post:C})]})]})]}):Object(c.jsx)(P,{})})})),Z=(n(72),Object(_.b)((function(e){return{token:e.auth.token,user:e.auth.user}}))((function(e){var t=E().request,n=Object(m.useState)(""),s=Object(y.a)(n,2),a=s[0],r=s[1],i=Object(m.useState)(!0),o=Object(y.a)(i,2),l=o[0],u=o[1],j=Object(m.useState)([]),d=Object(y.a)(j,2),b=d[0],h=d[1],O=Object(m.useState)([]),p=Object(y.a)(O,2),f=p[0],x=p[1];return Object(m.useEffect)(Object(S.a)(N.a.mark((function n(){var c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,u(!0),n.next=4,t("/api/users/get/users","GET",null,{Authorization:"Bearer ".concat(e.token)});case 4:c=n.sent,x(c),u(!1),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])}))),[]),Object(m.useEffect)(Object(S.a)(N.a.mark((function n(){var c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=15;break}return n.prev=1,u(!0),n.next=5,t("/api/users/post/users-search","POST",{query:a},{Authorization:"Bearer ".concat(e.token)});case 5:c=n.sent,h(c),u(!1),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.log(n.t0);case 13:n.next=16;break;case 15:h([]);case 16:case"end":return n.stop()}}),n,null,[[1,10]])}))),[a]),Object(c.jsxs)("div",{className:"users-page",children:[Object(c.jsxs)("div",{className:"search-user",children:[Object(c.jsx)("i",{className:"material-icons",style:{position:"absolute",top:"50%",transform:"translateY(-50%)"},children:"search"}),Object(c.jsx)("input",{type:"text",placeholder:"Search...",className:"search-input",value:a,onChange:function(e){return r(e.target.value)}})]}),0!==b.length?Object(c.jsx)("div",{className:"dropdown-content",children:b.map((function(t){return Object(c.jsx)(v.b,{to:e.user._id!==t._id?"/profile/"+t._id:"/profile",onClick:function(){return r("")},children:Object(c.jsxs)("div",{children:[Object(c.jsx)(I.a,{src:t.profileImg}),Object(c.jsx)("p",{children:t.displayName})]})},t._id)}))}):Object(c.jsx)("div",{className:"dropdown-content",children:f.map((function(t){return Object(c.jsx)(v.b,{to:e.user._id!==t._id?"/profile/"+t._id:"/profile",onClick:function(){return r("")},children:Object(c.jsxs)("div",{children:[Object(c.jsx)(I.a,{src:t.profileImg}),Object(c.jsx)("p",{children:t.displayName})]})},t._id)}))}),l&&Object(c.jsx)(P,{})]})}))),ee=(n(73),n(74),Object(_.b)((function(e){return{token:e.auth.token}}))((function(e){var t=Object(m.useState)([]),n=Object(y.a)(t,2),s=n[0],a=n[1],r=Object(m.useState)(!0),i=Object(y.a)(r,2),o=i[0],l=i[1],u=E().request;return Object(m.useEffect)(Object(S.a)(N.a.mark((function t(){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u("/api/posts/get/posts","GET",null,{Authorization:"Bearer ".concat(e.token)});case 2:n=t.sent,a(n.posts),l(!1);case 5:case"end":return t.stop()}}),t)}))),[]),Object(c.jsx)(c.Fragment,{children:o?Object(c.jsx)(P,{}):Object(c.jsx)("div",{className:"home-page",children:Object(c.jsx)("div",{className:"home-page__inner",children:s.map((function(e){return Object(c.jsx)($,{post:e},e._id)}))})})})}))),te=n(32),ne=(n(75),Object(_.b)((function(e){return{token:e.auth.token}}),(function(e){return{login:function(t,n){e(h(t,n))}}}))((function(e){var t=e.login,n=E().request,s=Object(m.useState)(!1),r=Object(y.a)(s,2),i=r[0],o=r[1],l=Object(m.useState)({email:"",displayName:"",password:""}),u=Object(y.a)(l,2),j=u[0],d=u[1],b=Object(m.useState)(!1),h=Object(y.a)(b,2),O=h[0],p=h[1];Object(m.useEffect)((function(){var e=JSON.parse(sessionStorage.getItem("storageName"));e&&e.token&&t(e.token,e.user)}),[t]);var f=function(e){d(Object(a.a)(Object(a.a)({},j),{},Object(te.a)({},e.target.name,e.target.value)))},x=function(){var t=Object(S.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o(!0),t.next=4,n("/api/auth/register","POST",Object(a.a)({},j),{Authorization:"Bearer ".concat(e.token)});case 4:o(!1),v(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0),o(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var c=Object(S.a)(N.a.mark((function c(){var s;return N.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,o(!0),c.next=4,n("/api/auth/login","POST",Object(a.a)({},j),{Authorization:"Bearer ".concat(e.token)});case 4:s=c.sent,t(s.token,s.user),c.next=12;break;case 8:c.prev=8,c.t0=c.catch(0),alert(c.t0.message),o(!1);case 12:case"end":return c.stop()}}),c,null,[[0,8]])})));return function(){return c.apply(this,arguments)}}(),v=function(){p(!O)};return Object(c.jsx)(c.Fragment,{children:i?Object(c.jsx)(P,{}):Object(c.jsxs)("div",{className:"split-screen",children:[Object(c.jsx)("div",{className:"left",children:Object(c.jsxs)("section",{className:"copy",children:[Object(c.jsx)("h1",{children:"Kalina"}),Object(c.jsx)("p",{children:"Text for the beauty."})]})}),Object(c.jsx)("div",{className:"right",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("section",{className:"copy",children:[Object(c.jsxs)("h2",{children:["Sign ",O?"up":"in"]}),Object(c.jsx)("div",{className:"login-container",children:O?Object(c.jsxs)("p",{children:["Already have an account? ",Object(c.jsx)("a",{onClick:v,children:Object(c.jsx)("strong",{children:"Sign in!"})})]}):Object(c.jsxs)("p",{children:["Don't have an account? ",Object(c.jsx)("a",{onClick:v,children:Object(c.jsx)("strong",{children:"Sign up!"})})]})})]}),O&&Object(c.jsxs)("div",{className:"input-container name",children:[Object(c.jsx)("label",{htmlFor:"displayName",children:"Nickname"}),Object(c.jsx)("input",{name:"displayName",id:"displayName",type:"text",value:j.displayName,onChange:f,required:!0,placeholder:"From 4 to 12 characters",minLength:"4",maxLength:"12"})]}),Object(c.jsxs)("div",{className:"input-container email",children:[Object(c.jsx)("label",{htmlFor:"email",children:"Email"}),Object(c.jsx)("input",{name:"email",id:"email",type:"email",value:j.email,onChange:f,required:!0})]}),Object(c.jsxs)("div",{className:"input-container password",children:[Object(c.jsx)("label",{htmlFor:"password",children:"Password"}),Object(c.jsx)("input",{name:"password",id:"password",type:"password",value:j.password,onChange:f,placeholder:"At least 6 characters!",required:!0,minLength:"6"}),Object(c.jsx)("i",{className:"far fa-eye-slash"})]}),O?Object(c.jsx)("button",{className:"signup-btn",type:"submit",onClick:x,children:"Sign up"}):Object(c.jsx)("button",{className:"signup-btn",type:"submit",onClick:g,children:"Sign in"}),Object(c.jsx)("section",{className:"copy legal",children:Object(c.jsx)("p",{children:Object(c.jsxs)("span",{className:"small",children:["By continuing, you agree to accept our ",Object(c.jsx)("br",{}),Object(c.jsx)("a",{children:"Privacy Policy"})," & ",Object(c.jsx)("a",{children:"Terms of Service"}),"."]})})})]})})]})})}))),ce=(n(76),Object(_.b)((function(e){return{token:e.auth.token}}),(function(e){return{login:function(t,n){e(h(t,n))}}}))((function(e){var t=JSON.parse(sessionStorage.getItem("storageName")),n=Object(m.useRef)(null),s=!!e.token,a=Object(c.jsxs)(w.c,{children:[Object(c.jsx)(w.a,{path:"/dialogs",component:Y}),Object(c.jsx)(w.a,{exact:!0,path:"/profile",render:function(){return Object(c.jsx)(V,{})}}),Object(c.jsx)(w.a,{exact:!0,path:"/profile/:userId",render:function(){return Object(c.jsx)(X,{})}}),Object(c.jsx)(w.a,{exact:!0,path:"/users",render:function(){return Object(c.jsx)(Z,{})}}),Object(c.jsx)(w.a,{exact:!0,path:"/",component:ee})]});function r(){try{n.current.style.height=document.body.clientHeight-(s?40:0)+"px"}catch(e){}}return t&&t.token&&e.login(t.token,t.user),Object(m.useEffect)((function(){return r(),window.addEventListener("resize",r),function(){return window.removeEventListener("resize",r)}}),[s]),Object(c.jsx)(v.a,{children:s?Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"main",children:[Object(c.jsx)(C,{}),Object(c.jsx)("div",{ref:n,className:"app",children:Object(c.jsx)("div",{className:"app-inner",children:a})})]})}):Object(c.jsx)(w.a,{path:"/",exact:!0,component:ne})})}))),se=(n(77),.01*window.innerHeight);document.documentElement.style.setProperty("--vh","".concat(se,"px")),window.addEventListener("resize",(function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))})),g.a.render(Object(c.jsx)(_.a,{store:f,children:Object(c.jsx)(ce,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.20a4711a.chunk.js.map