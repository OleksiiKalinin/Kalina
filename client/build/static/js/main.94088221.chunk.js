(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{50:function(e,t,s){e.exports={userPhoto:"users_userPhoto__pOnw3",selectedPage:"users_selectedPage__CpXl2"}},58:function(e,t,s){e.exports={item:"Post_item__2gkFz"}},70:function(e,t,s){},71:function(e,t,s){},75:function(e,t,s){},77:function(e,t,s){},79:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){},87:function(e,t,s){},88:function(e,t,s){},89:function(e,t,s){},90:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s(32),r=s(43),c=s(3),o="ADD-POST",i="UPDATE-NEW-POST-TEXT",l="SET_USER_PROFILE",u={posts:[{id:1,message:"Hi, how are you?",likesCount:12},{id:2,message:"It's my first post",likesCount:11},{id:3,message:"Blabla",likesCount:11},{id:4,message:"Dada",likesCount:11}],newPostText:"it-kamasutra.com",profile:null},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var s={id:5,message:e.newPostText,likesCount:0};return Object(c.a)(Object(c.a)({},e),{},{posts:[].concat(Object(r.a)(e.posts),[s]),newPostText:""});case i:return Object(c.a)(Object(c.a)({},e),{},{newPostText:t.newText});case l:return Object(c.a)(Object(c.a)({},e),{},{profile:t.profile});default:return e}},d={dialogs:[],messages:[],chat:{},isDialogChose:!1},b=function(e){return{type:"SET_MESSAGES",messages:e}},h=function(e){return{type:"SET_DIALOGS",dialogs:e}},p=function(e){return{type:"SET_CHAT",chat:e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":return Object(c.a)({},e);case"SET_MESSAGES":return Object(c.a)(Object(c.a)({},e),{},{newMessageBody:"",messages:t.messages});case"SET_DIALOGS":return Object(c.a)(Object(c.a)({},e),{},{dialogs:t.dialogs});case"SET_CHAT":return Object(c.a)(Object(c.a)({},e),{},{chat:t.chat});case"SET_IS_DIALOG_CHOSEN":return Object(c.a)(Object(c.a)({},e),{},{isDialogChose:!0});default:return e}},O={},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return e},m="FOLLOW",x="UNFOLLOW",v="SET_USERS",w="SET_CURRENT_PAGE",k="SET_TOTAL_USERS_COUNT",N="TOGGLE_IS_FETCHING",P="TOGGLE_IS_FOLLOWING_PROGRESS",_={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(c.a)(Object(c.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(c.a)(Object(c.a)({},e),{},{followed:!0}):e}))});case x:return Object(c.a)(Object(c.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(c.a)(Object(c.a)({},e),{},{followed:!1}):e}))});case v:return Object(c.a)(Object(c.a)({},e),{},{users:t.users});case w:return Object(c.a)(Object(c.a)({},e),{},{currentPage:t.currentPage});case k:return Object(c.a)(Object(c.a)({},e),{},{totalUsersCount:t.count});case N:return Object(c.a)(Object(c.a)({},e),{},{isFetching:t.isFetching});case P:return Object(c.a)(Object(c.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(r.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},y={token:null,user:{}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return localStorage.setItem("storageName",JSON.stringify({token:t.jwtSecret,user:t.user})),Object(c.a)(Object(c.a)({},e),{},{token:t.jwtSecret,user:t.user});case"LOGOUT":return localStorage.removeItem("storageName"),Object(c.a)(Object(c.a)({},e),{},{token:null,user:{}});default:return e}},E=Object(a.b)({profilePage:j,dialogsPage:g,sidebar:f,usersPage:S,auth:C}),I=Object(a.c)(E),T=s(0),D=s.n(T),F=s(23),A=s.n(F),G=(s(70),s(71),s(17)),L=s(6),U=s(7),M=(s(75),Object(L.b)((function(e){return{token:e.auth.token}}),(function(e){return{logout:function(){e({type:"LOGOUT"})}}}))((function(e){var t=e.logout,s=Object(U.f)();return Object(n.jsxs)("header",{className:"header",children:[Object(n.jsx)("span",{className:"label",children:Object(n.jsx)("big",{children:"Kalina chats"})}),Object(n.jsxs)("ul",{className:"navigation",children:[Object(n.jsx)("li",{children:Object(n.jsx)(G.b,{to:"/dialogs",children:"Dialogs"})}),Object(n.jsx)("li",{children:Object(n.jsx)(G.b,{to:"/profile/:userId?",children:"Profile"})}),Object(n.jsx)("li",{children:Object(n.jsx)(G.b,{to:"/users",children:"Users"})}),Object(n.jsx)("li",{children:Object(n.jsx)(G.b,{to:"/",onClick:function(e){e.preventDefault(),t(),s.push("/")},children:"Log out"})})]})]})}))),z=(s(77),s(5)),B=s.n(z),R=s(13),H=(s(79),s(105)),q=s(22),J=(s(80),s(110)),W=s(26),K=s.n(W),X=function(){var e=Object(T.useState)(!1),t=Object(q.a)(e,2),s=t[0],n=t[1],a=Object(T.useState)(null),r=Object(q.a)(a,2),c=r[0],o=r[1];return{loading:s,error:c,request:Object(T.useCallback)(function(){var e=Object(R.a)(B.a.mark((function e(t){var s,a,r,c,i,l=arguments;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]?l[3]:{},e.prev=3,a&&(a=JSON.stringify(a),r["Content-Type"]="application/json"),e.next=7,fetch("https://kalinaserver.herokuapp.com".concat(t),{method:s,body:a,headers:r});case 7:return c=e.sent,e.next=10,c.json();case 10:if(i=e.sent,c.ok){e.next=13;break}throw new Error(i.message||"Something goes wrong");case 13:return n(!1),e.abrupt("return",i);case 17:throw e.prev=17,e.t0=e.catch(3),n(!1),o(e.t0.message),e.t0;case 22:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t){return e.apply(this,arguments)}}(),[]),clearError:Object(T.useCallback)((function(){return o(null)}),[])}},Q=new K.a("b634efb073fba40fbf3a",{cluster:"eu"}),V=Object(L.b)((function(e){return{dialogs:e.dialogsPage.dialogs,token:e.auth.token}}),(function(e){return{setDialogs:function(t){e(h(t))},setMessages:function(t){e(b(t))},setChat:function(t){e(p(t))},setIsDialogChose:function(){e({type:"SET_IS_DIALOG_CHOSEN"})}}}))((function(e){var t=X(),s=(t.loading,t.error,t.request),a=(t.clearError,Object(T.useState)({})),r=Object(q.a)(a,2),c=r[0],o=r[1],i="",l="",u=0,j=function(){var t=Object(R.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("/api/chats/get/lastMessage?id=".concat(e.id),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:n=t.sent,o(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();Object(T.useEffect)((function(){j();var e=Q.subscribe("messages");return e.bind("newMessage",(function(){j()})),function(){e.unbind_all(),e.unsubscribe()}}),[e.id]);var d=function(){var t=Object(R.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("/api/chats/get/conversation?id=".concat(e.id),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:n=t.sent,e.setMessages(n[0].conversation),e.setChat({chatName:n[0].chatName,chatId:e.id}),e.setIsDialogChose(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(1);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();try{i=c.user.displayName,l=c.message,u=c.timestamp}catch(b){}return Object(n.jsxs)("div",{onClick:function(){return d()},className:"dialogItem",children:[Object(n.jsxs)("div",{className:"dialogItem__info",children:[Object(n.jsx)(J.a,{}),Object(n.jsx)("h2",{children:e.name}),Object(n.jsx)("p",{children:i+": "+l||""})]}),Object(n.jsx)("small",{children:new Date(parseInt(u)).toISOString().replace(/T/g," ").replace(/\..*/,"")})]})})),Y=s(104),Z=new K.a("b634efb073fba40fbf3a",{cluster:"eu"}),$=Object(L.b)((function(e){return{dialogs:e.dialogsPage.dialogs,user:e.auth.user,token:e.auth.token}}),(function(e){return{setDialogs:function(t){e(h(t))}}}))((function(e){var t=X(),s=(t.loading,t.error,t.request),a=(t.clearError,function(){var t=Object(R.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("/api/chats/get/conversations","GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:n=t.sent,e.setDialogs(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(1);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}());Object(T.useEffect)((function(){a(),Z.subscribe("chats").bind("newChat",(function(){a()}))}),[]);var r=function(){var t=Object(R.a)(B.a.mark((function t(n){var a,r,c,o;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=prompt("Enter a chat name"),r=prompt("Send a welcome message"),!a||!r){t.next=17;break}return t.prev=4,c="",t.next=8,s("/api/chats/new/conversation","POST",{chatName:a},{Authorization:"Bearer ".concat(e.token)});case 8:return o=t.sent,c=o._id,t.next=12,s("/api/chats/new/message?id=".concat(c),"POST",{message:r,timestamp:Date.now(),user:e.user},{Authorization:"Bearer ".concat(e.token)});case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),console.log(1);case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"dialogs",children:[Object(n.jsx)("div",{className:"dialogs__header",children:Object(n.jsx)(Y.a,{onClick:r,children:"Add a new chat"})}),Object(n.jsx)("div",{className:"dialogs__search",children:Object(n.jsxs)("div",{className:"dialogs__searchContainer",children:[Object(n.jsx)(H.a,{}),Object(n.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),Object(n.jsx)("div",{className:"dialogs__items",children:e.dialogs.map((function(e){return Object(n.jsx)(V,{name:e.name,id:e.id,timestamp:e.timestamp},e.id)}))})]})})),ee=s(106),te=s(107),se=s(108),ne=s(109),ae=s(57),re=s.n(ae),ce=(s(81),s(82),function(e){return Object(n.jsxs)("div",{className:"messages__item  ".concat(e.message.user.displayName===e.userName&&"messages__receiver"),children:[Object(n.jsx)("span",{className:"message__name",children:e.message.user.displayName}),Object(n.jsx)("div",{className:"message",children:e.message.message}),Object(n.jsx)("span",{className:"message__timestamp",children:new Date(parseInt(e.message.timestamp)).toISOString().replace(/T/g," ").replace(/\..*/,"")})]})}),oe=function(e){var t=X(),s=(t.loading,t.error,t.request),a=(t.clearError,Object(T.useState)("")),r=Object(q.a)(a,2),c=r[0],o=r[1],i=function(){var t=Object(R.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,s("/api/chats/new/message?id=".concat(e.chat.chatId),"POST",{message:c,timestamp:Date.now(),user:e.user},{Authorization:"Bearer ".concat(e.token)});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(1);case 9:o("");case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),l=function(){var e=document.querySelector(".messages__body");e.scrollTop=e.scrollHeight};return Object(T.useEffect)((function(){var t=new K.a("b634efb073fba40fbf3a",{cluster:"eu"}).subscribe("messages");return t.bind("newMessage",Object(R.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("/api/chats/get/conversation?id=".concat(e.chat.chatId),"GET",null,{Authorization:"Bearer ".concat(e.token)});case 3:n=t.sent,e.setMessages(n[0].conversation),l(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(1);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))),l(),function(){t.unbind_all(),t.unsubscribe()}}),[e.chat.chatId]),Object(n.jsxs)("div",{className:"messages",children:[Object(n.jsxs)("div",{className:"messages__header",children:[Object(n.jsx)(J.a,{}),Object(n.jsxs)("div",{className:"messages__headerInfo",children:[Object(n.jsx)("h3",{children:e.chat.chatName}),Object(n.jsx)("p",{children:"Last seen at..."})]}),Object(n.jsxs)("div",{className:"messages__headerRight",children:[Object(n.jsx)(ee.a,{children:Object(n.jsx)(H.a,{})}),Object(n.jsx)(ee.a,{children:Object(n.jsx)(te.a,{})}),Object(n.jsx)(ee.a,{children:Object(n.jsx)(se.a,{})})]})]}),Object(n.jsx)("div",{className:"messages__body",children:e.messages.map((function(t){return Object(n.jsx)(ce,{userName:e.user.displayName,message:t},t._id)}))}),Object(n.jsxs)("div",{className:"messages__footer",children:[Object(n.jsx)(ne.a,{}),Object(n.jsxs)("form",{children:[Object(n.jsx)("input",{type:"text",value:c,onChange:function(e){var t=e.target.value;o(t)},placeholder:"Enter your message"}),Object(n.jsx)("button",{type:"submit",onClick:i,children:"Send"})]}),Object(n.jsx)(re.a,{})]})]})},ie=Object(L.b)((function(e){return{messages:e.dialogsPage.messages,chat:e.dialogsPage.chat,user:e.auth.user,token:e.auth.token}}),(function(e){return{sendMessage:function(){e({type:"SEND_MESSAGE"})},setMessages:function(t){e(b(t))},setChat:function(t){e(p(t))}}}))(oe),le=Object(L.b)((function(e){return{isDialogChose:e.dialogsPage.isDialogChose}}))((function(e){return Object(n.jsxs)("div",{className:"main",children:[Object(n.jsx)($,{}),e.isDialogChose?Object(n.jsx)(ie,{}):Object(n.jsx)("div",{className:"chooseChat",children:"Choose a chat"})]})})),ue=s(40),je=s(41),de=s(44),be=s(42),he=(s(87),s.p+"static/media/preloader.5788b05c.svg"),pe=function(e){return Object(n.jsx)("div",{style:{backgroundColor:"white"},children:Object(n.jsx)("img",{alt:"",src:he})})},ge=function(e){return e.profile?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{alt:"",src:"https://images.pexels.com/photos/248797/pexels-photo-248797.jpeg?auto=compress&cs=tinysrgb&h=350"})}),Object(n.jsxs)("div",{className:"description",children:[Object(n.jsx)("img",{alt:"",src:e.profile.photos.large}),"ava + description"]})]}):Object(n.jsx)(pe,{})},Oe=(s(88),s(58)),fe=s.n(Oe),me=function(e){return Object(n.jsxs)("div",{className:fe.a.item,children:[Object(n.jsx)("img",{alt:"",src:"https://movies4maniacs.liberty.me/wp-content/uploads/sites/1218/2015/09/avatarsucks.jpg"}),e.message,Object(n.jsxs)("div",{children:[Object(n.jsx)("span",{children:"like"})," ",e.likesCount]})]})},xe=function(e){var t=e.posts.map((function(e){return Object(n.jsx)(me,{message:e.message,likesCount:e.likesCount})})),s=D.a.createRef();return Object(n.jsxs)("div",{className:"posts",children:[Object(n.jsx)("h3",{children:"My posts"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:Object(n.jsx)("textarea",{onChange:function(){var t=s.current.value;e.updateNewPostText(t)},ref:s,value:e.newPostText})}),Object(n.jsx)("div",{children:Object(n.jsx)("button",{onClick:function(){e.addPost()},children:"Add post"})})]}),Object(n.jsx)("div",{className:"posts__list",children:t})]})},ve=Object(L.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{updateNewPostText:function(t){var s=function(e){return{type:i,newText:e}}(t);e(s)},addPost:function(){e({type:o})}}}))(xe),we=(s(89),function(e){return Object(n.jsx)("div",{className:"profile",children:Object(n.jsxs)("div",{className:"profile__inner",children:[Object(n.jsx)(ge,{profile:e.profile}),Object(n.jsx)(ve,{})]})})}),ke=function(e){Object(de.a)(s,e);var t=Object(be.a)(s);function s(){return Object(ue.a)(this,s),t.apply(this,arguments)}return Object(je.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=2)}},{key:"render",value:function(){return Object(n.jsx)(we,Object(c.a)(Object(c.a)({},this.props),{},{profile:this.props.profile}))}}]),s}(D.a.Component),Ne=Object(U.g)(ke),Pe=Object(L.b)((function(e){return{profile:e.profilePage.profile}}),{setUserProfile:function(e){return{type:l,profile:e}}})(Ne),_e=s(50),Se=s.n(_e),ye=s.p+"static/media/user.96e310a6.png",Ce=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],a=1;a<=t;a++)s.push(a);return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:s.map((function(t){return Object(n.jsx)("span",{className:e.currentPage===t&&Se.a.selectedPage,onClick:function(s){e.onPageChanged(t)},children:t})}))}),e.users.map((function(t){return Object(n.jsxs)("div",{children:[Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{children:Object(n.jsx)(G.c,{to:"/profile/"+t.id,children:Object(n.jsx)("img",{alt:"",src:null!=t.photos.small?t.photos.small:ye,className:Se.a.userPhoto})})}),Object(n.jsx)("div",{children:t.followed?Object(n.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.toggleFollowingProgress(!0,t.id)},children:"Unfollow"}):Object(n.jsx)("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.toggleFollowingProgress(!0,t.id)},children:"Follow"})})]}),Object(n.jsxs)("span",{children:[Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{children:t.name}),Object(n.jsx)("div",{children:t.status})]}),Object(n.jsxs)("span",{children:[Object(n.jsx)("div",{children:"u.location.country"}),Object(n.jsx)("div",{children:"u.location.city"})]})]})]},t.id)}))]})},Ee=function(e){Object(de.a)(s,e);var t=Object(be.a)(s);function s(){var e;Object(ue.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.toggleIsFetching(!0)},e}return Object(je.a)(s,[{key:"componentDidMount",value:function(){this.props.toggleIsFetching(!0)}},{key:"render",value:function(){return Object(n.jsxs)(n.Fragment,{children:[this.props.isFetching?Object(n.jsx)(pe,{}):null,Object(n.jsx)(Ce,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,toggleFollowingProgress:this.props.toggleFollowingProgress,followingInProgress:this.props.followingInProgress})]})}}]),s}(D.a.Component),Ie=Object(L.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{follow:function(e){return{type:m,userId:e}},unfollow:function(e){return{type:x,userId:e}},setUsers:function(e){return{type:v,users:e}},setCurrentPage:function(e){return{type:w,currentPage:e}},setTotalUsersCount:function(e){return{type:k,count:e}},toggleIsFetching:function(e){return{type:N,isFetching:e}},toggleFollowingProgress:function(e,t){return{type:P,isFetching:e,userId:t}}})(Ee),Te=s(38),De=Object(L.b)((function(e){return{token:e.auth.token}}),(function(e){return{login:function(t,s){e(function(e,t){return{type:"LOGIN",jwtSecret:e,user:t}}(t,s))}}}))((function(e){var t=e.login,s=Object(T.useCallback)((function(e){window.M&&e&&window.M.toast({html:e})}),[]),a=X(),r=a.loading,o=a.error,i=a.request,l=a.clearError,u=Object(T.useState)({email:"",displayName:"",password:""}),j=Object(q.a)(u,2),d=j[0],b=j[1];Object(T.useEffect)((function(){s(o),l()}),[o,s,l]),Object(T.useEffect)((function(){var e=JSON.parse(localStorage.getItem("storageName"));e&&e.token&&t(e.token,e.user)}),[]);var h=function(e){b(Object(c.a)(Object(c.a)({},d),{},Object(Te.a)({},e.target.name,e.target.value)))},p=function(){var t=Object(R.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i("/api/auth/register","POST",Object(c.a)({},d),{Authorization:"Bearer ".concat(e.token)});case 3:n=t.sent,s(n.message),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(1111);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),g=function(){var s=Object(R.a)(B.a.mark((function s(){var n;return B.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,i("/api/auth/login","POST",Object(c.a)({},d),{Authorization:"Bearer ".concat(e.token)});case 3:n=s.sent,t(n.token,n.user),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log(1111);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})));return function(){return s.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col s6 offset-s3",children:[Object(n.jsx)("h1",{children:"Kalina chats"}),Object(n.jsxs)("div",{className:"card blue darken-1",children:[Object(n.jsxs)("div",{className:"card-content white-text",children:[Object(n.jsx)("span",{className:"card-title",children:"Log in"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"input-field col s12",children:[Object(n.jsx)("input",{name:"email",id:"email",type:"email",className:"validate",value:d.email,onChange:h}),Object(n.jsx)("label",{htmlFor:"email",children:"Email"})]})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"input-field col s12",children:[Object(n.jsx)("input",{name:"displayName",id:"displayName",type:"text",className:"validate",value:d.displayName,onChange:h}),Object(n.jsx)("label",{htmlFor:"displayName",children:"Name"})]})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"input-field col s12",children:[Object(n.jsx)("input",{name:"password",id:"password",type:"password",className:"validate",value:d.password,onChange:h}),Object(n.jsx)("label",{htmlFor:"password",children:"Password"})]})})]})]}),Object(n.jsxs)("div",{className:"card-action",children:[Object(n.jsx)("button",{className:"btn yellow darken-4",style:{marginRight:20},disabled:r,onClick:g,children:"Log in"}),Object(n.jsx)("button",{className:"btn grey lighten-1 black text",onClick:p,disabled:r,children:"Registrate"})]})]})]})})})),Fe=Object(L.b)((function(e){return{token:e.auth.token}}))((function(e){var t=!!e.token,s=t?Object(n.jsxs)(U.c,{children:[Object(n.jsx)(U.a,{exact:!0,path:"/dialogs",component:le}),Object(n.jsx)(U.a,{exact:!0,path:"/profile/:userId?",render:function(){return Object(n.jsx)(Pe,{})}}),Object(n.jsx)(U.a,{exact:!0,path:"/users",render:function(){return Object(n.jsx)(Ie,{})}})]}):Object(n.jsx)(U.a,{path:"/",exact:!0,component:De});return Object(n.jsx)(G.a,{children:Object(n.jsxs)("div",{className:"root__child",children:[t&&Object(n.jsx)(M,{}),Object(n.jsx)("div",{className:"app-wrapper",children:Object(n.jsx)("div",{className:"app-wrapper-content",children:s})})]})})}));A.a.render(Object(n.jsx)(L.a,{store:I,children:Object(n.jsx)(Fe,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.94088221.chunk.js.map